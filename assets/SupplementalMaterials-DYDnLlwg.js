import{X as y,Y as v,b as r,j as e,F as s,I as f,T as n,Z as g,J as P,$ as H,S as L,K as B,aJ as U,ad as N,as as _,ae as G,at as J,au as K,aA as O,aH as q,aD as M,ax as w,aE as z,aK as X,aL as Y,aM as m,a7 as c,a8 as A,a9 as I}from"./index-r7fLVB3K.js";import{d as R}from"./Visibility-BEBxFVdR.js";const Z=()=>{const{userDetails:a}=y(),o=v(),[t,l]=r.useState(!1),[x,h]=r.useState(!1),p=()=>{a!=null&&a.uid?navigator.clipboard.writeText(a.uid).then(()=>{l(!0),h(!0)}).catch(j=>{console.error("Could not copy text: ",j)}):console.error("User details are null or undefined")},u=(j,d)=>{d!=="clickaway"&&l(!1)},b=()=>{o("/")};return e.jsxs(s,{children:[e.jsx(s,{sx:{display:"flex",alignItems:"center"},children:e.jsx(f,{variant:"text",onClick:b,sx:{mr:2},children:"← Home Page"})}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(n,{variant:"h4",component:"h1",sx:{fontWeight:"bold"},children:"Supplemental Materials"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[(a==null?void 0:a.isAdmin)&&e.jsx(g,{label:"Educator (Admin User)",variant:"outlined",sx:{borderRadius:"15px",fontWeight:"bold",background:"#ffcdd2",color:"#c62828",mr:1}}),!(a!=null&&a.isAdmin)&&e.jsx(g,{label:"Student (Regular User)",variant:"outlined",sx:{borderRadius:"15px",fontWeight:"bold",background:"#bbdefb",color:"#1e88e5",mr:1}}),a&&e.jsx(P,{title:x?"Copied!":"Click to Copy",enterDelay:300,leaveDelay:200,children:e.jsx(g,{label:`User ID: ${a.uid}`,variant:"outlined",onClick:p,sx:{borderRadius:"15px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",cursor:"pointer",transition:"background-color 0.3s",mr:2}})}),e.jsx(H,{})]}),e.jsx(L,{open:t,autoHideDuration:6e3,onClose:u,children:e.jsx(B,{onClose:u,severity:"success",sx:{width:"100%"},children:"User ID copied to clipboard!"})})]})]})},Q=()=>{const a=v();return e.jsx(f,{variant:"contained",color:"primary",onClick:()=>a("/add-material"),sx:{fontSize:"1.2rem",mt:2,mb:4,textTransform:"none",minWidth:"150px",boxShadow:"none","&:hover":{boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.2)",transform:"scale(1.05)"},transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out",border:"1px solid transparent"},children:"+ Add Material"})},V=({materialId:a,open:o,onClose:t,onDelete:l})=>{const x=U(),h=async()=>{const p=O(x,"materials",a);await q(p),l(),t()};return e.jsxs(N,{open:o,onClose:t,children:[e.jsx(_,{children:"Delete Material"}),e.jsx(G,{children:e.jsx(J,{children:"Are you sure you want to delete this material? This action cannot be undone."})}),e.jsxs(K,{children:[e.jsx(f,{onClick:t,color:"primary",children:"Cancel"}),e.jsx(f,{onClick:h,color:"secondary",children:"Delete"})]})]})},ee=()=>{const{userDetails:a}=y(),o=U(),[t,l]=r.useState([]),[x,h]=r.useState(!0),[p,u]=r.useState(!1),[b,j]=r.useState(null),d=v();r.useEffect(()=>{if(!a)return;const i=a.isAdmin?M(w(o,"materials")):M(w(o,"materials"),z("published","==",!0)),W=X(i,T=>{const $=T.docs.map(D=>({id:D.id,...D.data()}));l($),h(!1)});return()=>W()},[o,a]);const C=i=>{j(i),u(!0)},E=()=>{u(!1),j(null)},F=()=>{l(t.filter(i=>i.id!==b))};if(x)return e.jsx(Y,{});const k=t.filter(i=>!i.published),S=t.filter(i=>i.published);return e.jsxs(s,{sx:{width:"100%"},children:[(a==null?void 0:a.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx(s,{sx:{backgroundColor:"#FFF9C4",borderRadius:"8px",padding:"4px 8px",display:"inline-block",mb:2},children:e.jsx(n,{variant:"h6",sx:{fontWeight:"bold",color:"#F57F17"},children:"Saved (Unpublished)"})}),e.jsx(m,{container:!0,spacing:3,children:k.length===0?e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%"},children:"No saved (unpublished) materials found."}):k.map(i=>e.jsx(m,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(s,{sx:{border:"1px solid #ddd",borderRadius:"8px",padding:2,position:"relative"},children:[e.jsx(s,{children:i.author===(a==null?void 0:a.uid)&&e.jsx(g,{label:"My Material",variant:"outlined",sx:{borderRadius:"15px",fontWeight:"bold",background:"#C5E1A5",color:"#2E7D32",ml:1}})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{onClick:()=>d(`/view-material/${i.id}`),"aria-label":"view",children:e.jsx(R,{})}),e.jsx(n,{variant:"h6",children:i.title||"Untitled"})]}),e.jsxs(n,{variant:"body2",color:"textSecondary",children:["Date: ",i.timestamp.toDate().toLocaleDateString()]}),e.jsx(n,{variant:"body2",color:"textSecondary",children:i.published?"Published":"Unpublished"}),e.jsx(s,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:(a==null?void 0:a.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>d(`/edit-material/${i.id}`),"aria-label":"edit",children:e.jsx(A,{})}),e.jsx(c,{onClick:()=>C(i.id),"aria-label":"delete",children:e.jsx(I,{})})]})})]})},i.id))})]}),e.jsx(s,{sx:{backgroundColor:"#C8E6C9",borderRadius:"8px",padding:"4px 8px",display:"inline-block",mt:4,mb:2},children:e.jsx(n,{variant:"h6",sx:{fontWeight:"bold",color:"#2E7D32"},children:"Published"})}),e.jsx(m,{container:!0,spacing:3,children:S.length===0?e.jsx(n,{variant:"body1",align:"center",sx:{width:"100%"},children:"No published materials found."}):S.map(i=>e.jsx(m,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(s,{sx:{border:"1px solid #ddd",borderRadius:"8px",padding:2,position:"relative"},children:[e.jsx(s,{children:i.author===(a==null?void 0:a.uid)&&e.jsx(g,{label:"My Material",variant:"outlined",sx:{borderRadius:"15px",fontWeight:"bold",background:"#C5E1A5",color:"#2E7D32",ml:1}})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{onClick:()=>d(`/view-material/${i.id}`),"aria-label":"view",children:e.jsx(R,{})}),e.jsx(n,{variant:"h6",children:i.title||"Untitled"})]}),e.jsxs(n,{variant:"body2",color:"textSecondary",children:["Date: ",i.timestamp.toDate().toLocaleDateString()]}),e.jsx(n,{variant:"body2",color:"textSecondary",children:i.published?"Published":"Unpublished"}),e.jsx(s,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:(a==null?void 0:a.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>d(`/edit-material/${i.id}`),"aria-label":"edit",children:e.jsx(A,{})}),e.jsx(c,{onClick:()=>C(i.id),"aria-label":"delete",children:e.jsx(I,{})})]})})]})},i.id))}),b&&e.jsx(V,{materialId:b,open:p,onClose:E,onDelete:F})]})},se=()=>{const{userDetails:a}=y();return e.jsxs(s,{sx:{flexGrow:1,padding:3},children:[e.jsx(Z,{}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[(a==null?void 0:a.isAdmin)&&e.jsx(Q,{}),e.jsx(ee,{})]})]})};export{se as default};
