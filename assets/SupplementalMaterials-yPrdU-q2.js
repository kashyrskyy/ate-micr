import{X as f,Y as y,b as o,j as e,F as i,I as m,T as t,Z as D,J as W,$ as H,S as L,K as B,aJ as F,ad as N,as as _,ae as G,at as J,au as K,aA as O,aH as q,aD as w,ax as M,aE as z,aK as X,aL as Y,aM as g,a7 as c,a8 as A,a9 as I}from"./index-C3wO2F4N.js";import{d as U}from"./Visibility-Di8qZtND.js";const Z=()=>{const{userDetails:s}=f(),l=y(),[n,r]=o.useState(!1),[x,h]=o.useState(!1),p=()=>{s!=null&&s.uid?navigator.clipboard.writeText(s.uid).then(()=>{r(!0),h(!0)}).catch(j=>{console.error("Could not copy text: ",j)}):console.error("User details are null or undefined")},u=(j,d)=>{d!=="clickaway"&&r(!1)},b=()=>{l("/")};return e.jsxs(i,{children:[e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsx(m,{variant:"text",onClick:b,sx:{mr:2},children:"← Home Page"})}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(t,{variant:"h4",component:"h1",sx:{fontWeight:"bold"},children:"Supplemental Materials"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[(s==null?void 0:s.isAdmin)&&e.jsx(D,{label:"Admin",variant:"outlined",sx:{borderRadius:"15px",fontWeight:"bold",background:"#ffcdd2",color:"#c62828",mr:1}}),s&&e.jsx(W,{title:x?"Copied!":"Click to Copy",enterDelay:300,leaveDelay:200,children:e.jsx(D,{label:`User ID: ${s.uid}`,variant:"outlined",onClick:p,sx:{borderRadius:"15px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",cursor:"pointer",transition:"background-color 0.3s",mr:2}})}),e.jsx(H,{})]}),e.jsx(L,{open:n,autoHideDuration:6e3,onClose:u,children:e.jsx(B,{onClose:u,severity:"success",sx:{width:"100%"},children:"User ID copied to clipboard!"})})]})]})},Q=()=>{const s=y();return e.jsx(m,{variant:"contained",color:"primary",onClick:()=>s("/add-material"),sx:{fontSize:"1.2rem",mt:2,mb:4,textTransform:"none",minWidth:"150px",boxShadow:"none","&:hover":{boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.2)",transform:"scale(1.05)"},transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out",border:"1px solid transparent"},children:"+ Add Material"})},V=({materialId:s,open:l,onClose:n,onDelete:r})=>{const x=F(),h=async()=>{const p=O(x,"materials",s);await q(p),r(),n()};return e.jsxs(N,{open:l,onClose:n,children:[e.jsx(_,{children:"Delete Material"}),e.jsx(G,{children:e.jsx(J,{children:"Are you sure you want to delete this material? This action cannot be undone."})}),e.jsxs(K,{children:[e.jsx(m,{onClick:n,color:"primary",children:"Cancel"}),e.jsx(m,{onClick:h,color:"secondary",children:"Delete"})]})]})},ee=()=>{const{userDetails:s}=f(),l=F(),[n,r]=o.useState([]),[x,h]=o.useState(!0),[p,u]=o.useState(!1),[b,j]=o.useState(null),d=y();o.useEffect(()=>{if(!s)return;const a=s.isAdmin?w(M(l,"materials")):w(M(l,"materials"),z("published","==",!0)),$=X(a,E=>{const P=E.docs.map(S=>({id:S.id,...S.data()}));r(P),h(!1)});return()=>$()},[l,s]);const v=a=>{j(a),u(!0)},R=()=>{u(!1),j(null)},T=()=>{r(n.filter(a=>a.id!==b))};if(x)return e.jsx(Y,{});const C=n.filter(a=>!a.published),k=n.filter(a=>a.published);return e.jsxs(i,{sx:{width:"100%"},children:[(s==null?void 0:s.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx(i,{sx:{backgroundColor:"#FFF9C4",borderRadius:"8px",padding:"4px 8px",display:"inline-block",mb:2},children:e.jsx(t,{variant:"h6",sx:{fontWeight:"bold",color:"#F57F17"},children:"Saved (Unpublished)"})}),e.jsx(g,{container:!0,spacing:3,children:C.length===0?e.jsx(t,{variant:"body1",align:"center",sx:{width:"100%"},children:"No saved (unpublished) materials found."}):C.map(a=>e.jsx(g,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(i,{sx:{border:"1px solid #ddd",borderRadius:"8px",padding:2,position:"relative"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{onClick:()=>d(`/view-material/${a.id}`),"aria-label":"view",children:e.jsx(U,{})}),e.jsx(t,{variant:"h6",children:a.title||"Untitled"})]}),e.jsxs(t,{variant:"body2",color:"textSecondary",children:["Date: ",a.timestamp.toDate().toLocaleDateString()]}),e.jsx(t,{variant:"body2",color:"textSecondary",children:a.published?"Published":"Unpublished"}),e.jsx(i,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:(s==null?void 0:s.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>d(`/edit-material/${a.id}`),"aria-label":"edit",children:e.jsx(A,{})}),e.jsx(c,{onClick:()=>v(a.id),"aria-label":"delete",children:e.jsx(I,{})})]})})]})},a.id))})]}),e.jsx(i,{sx:{backgroundColor:"#C8E6C9",borderRadius:"8px",padding:"4px 8px",display:"inline-block",mt:4,mb:2},children:e.jsx(t,{variant:"h6",sx:{fontWeight:"bold",color:"#2E7D32"},children:"Published"})}),e.jsx(g,{container:!0,spacing:3,children:k.length===0?e.jsx(t,{variant:"body1",align:"center",sx:{width:"100%"},children:"No published materials found."}):k.map(a=>e.jsx(g,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(i,{sx:{border:"1px solid #ddd",borderRadius:"8px",padding:2,position:"relative"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(c,{onClick:()=>d(`/view-material/${a.id}`),"aria-label":"view",children:e.jsx(U,{})}),e.jsx(t,{variant:"h6",children:a.title||"Untitled"})]}),e.jsxs(t,{variant:"body2",color:"textSecondary",children:["Date: ",a.timestamp.toDate().toLocaleDateString()]}),e.jsx(t,{variant:"body2",color:"textSecondary",children:a.published?"Published":"Unpublished"}),e.jsx(i,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:(s==null?void 0:s.isAdmin)&&e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>d(`/edit-material/${a.id}`),"aria-label":"edit",children:e.jsx(A,{})}),e.jsx(c,{onClick:()=>v(a.id),"aria-label":"delete",children:e.jsx(I,{})})]})})]})},a.id))}),b&&e.jsx(V,{materialId:b,open:p,onClose:R,onDelete:T})]})},ie=()=>{const{userDetails:s}=f();return e.jsxs(i,{sx:{flexGrow:1,padding:3},children:[e.jsx(Z,{}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[(s==null?void 0:s.isAdmin)&&e.jsx(Q,{}),e.jsx(ee,{})]})]})};export{ie as default};
