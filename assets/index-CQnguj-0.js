import{j as f,t as Oe,h as Ne,v as Te,e as Z,a as K,x as $e,r as N,y as Be,_ as ze,f as be,g as He,T as Zt,w as qn,I as Yn,J as Kn,R as Tn,A as Zn,K as Gn,L as St,B as zt,z as ot,M as fn,N as hn,O as Xn,P as Jn,Q as er,S as Sn,U as Gt,V as Xt,W as Ee,X as ie,Y as we,Z as Ke,$ as tr,a0 as nt,a1 as wt,a2 as De,a3 as ct,a4 as Tt}from"./index-e7Tm2yEb.js";import{c as nr,e as rr,B as pn,g as or,M as ar,P as Jt,h as sr,i as ir,F as lr,A as ft,b as _e,S as ht,d as Vt,r as at,I as rt,T as Qt}from"./createSvgIcon-Ckpun1uY.js";const cr=nr(f.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function dr(n){return Ne("MuiChip",n)}const ur=Oe("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),te=ur,fr=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],hr=n=>{const{classes:c,disabled:T,size:s,color:e,iconColor:t,onDelete:i,clickable:l,variant:v}=n,x={root:["root",v,T&&"disabled",`size${Z(s)}`,`color${Z(e)}`,l&&"clickable",l&&`clickableColor${Z(e)}`,i&&"deletable",i&&`deletableColor${Z(e)}`,`${v}${Z(e)}`],label:["label",`label${Z(s)}`],avatar:["avatar",`avatar${Z(s)}`,`avatarColor${Z(e)}`],icon:["icon",`icon${Z(s)}`,`iconColor${Z(t)}`],deleteIcon:["deleteIcon",`deleteIcon${Z(s)}`,`deleteIconColor${Z(e)}`,`deleteIcon${Z(v)}Color${Z(e)}`]};return He(x,dr,c)},pr=Te("div",{name:"MuiChip",slot:"Root",overridesResolver:(n,c)=>{const{ownerState:T}=n,{color:s,iconColor:e,clickable:t,onDelete:i,size:l,variant:v}=T;return[{[`& .${te.avatar}`]:c.avatar},{[`& .${te.avatar}`]:c[`avatar${Z(l)}`]},{[`& .${te.avatar}`]:c[`avatarColor${Z(s)}`]},{[`& .${te.icon}`]:c.icon},{[`& .${te.icon}`]:c[`icon${Z(l)}`]},{[`& .${te.icon}`]:c[`iconColor${Z(e)}`]},{[`& .${te.deleteIcon}`]:c.deleteIcon},{[`& .${te.deleteIcon}`]:c[`deleteIcon${Z(l)}`]},{[`& .${te.deleteIcon}`]:c[`deleteIconColor${Z(s)}`]},{[`& .${te.deleteIcon}`]:c[`deleteIcon${Z(v)}Color${Z(s)}`]},c.root,c[`size${Z(l)}`],c[`color${Z(s)}`],t&&c.clickable,t&&s!=="default"&&c[`clickableColor${Z(s)})`],i&&c.deletable,i&&s!=="default"&&c[`deletableColor${Z(s)}`],c[v],c[`${v}${Z(s)}`]]}})(({theme:n,ownerState:c})=>{const T=n.palette.mode==="light"?n.palette.grey[700]:n.palette.grey[300];return K({maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(n.vars||n).palette.text.primary,backgroundColor:(n.vars||n).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${te.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${te.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:n.vars?n.vars.palette.Chip.defaultAvatarColor:T,fontSize:n.typography.pxToRem(12)},[`& .${te.avatarColorPrimary}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.dark},[`& .${te.avatarColorSecondary}`]:{color:(n.vars||n).palette.secondary.contrastText,backgroundColor:(n.vars||n).palette.secondary.dark},[`& .${te.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)},[`& .${te.icon}`]:K({marginLeft:5,marginRight:-6},c.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},c.iconColor===c.color&&K({color:n.vars?n.vars.palette.Chip.defaultIconColor:T},c.color!=="default"&&{color:"inherit"})),[`& .${te.deleteIcon}`]:K({WebkitTapHighlightColor:"transparent",color:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / 0.26)`:$e(n.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / 0.4)`:$e(n.palette.text.primary,.4)}},c.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},c.color!=="default"&&{color:n.vars?`rgba(${n.vars.palette[c.color].contrastTextChannel} / 0.7)`:$e(n.palette[c.color].contrastText,.7),"&:hover, &:active":{color:(n.vars||n).palette[c.color].contrastText}})},c.size==="small"&&{height:24},c.color!=="default"&&{backgroundColor:(n.vars||n).palette[c.color].main,color:(n.vars||n).palette[c.color].contrastText},c.onDelete&&{[`&.${te.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:$e(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},c.onDelete&&c.color!=="default"&&{[`&.${te.focusVisible}`]:{backgroundColor:(n.vars||n).palette[c.color].dark}})},({theme:n,ownerState:c})=>K({},c.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:$e(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)},[`&.${te.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:$e(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)},"&:active":{boxShadow:(n.vars||n).shadows[1]}},c.clickable&&c.color!=="default"&&{[`&:hover, &.${te.focusVisible}`]:{backgroundColor:(n.vars||n).palette[c.color].dark}}),({theme:n,ownerState:c})=>K({},c.variant==="outlined"&&{backgroundColor:"transparent",border:n.vars?`1px solid ${n.vars.palette.Chip.defaultBorder}`:`1px solid ${n.palette.mode==="light"?n.palette.grey[400]:n.palette.grey[700]}`,[`&.${te.clickable}:hover`]:{backgroundColor:(n.vars||n).palette.action.hover},[`&.${te.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`& .${te.avatar}`]:{marginLeft:4},[`& .${te.avatarSmall}`]:{marginLeft:2},[`& .${te.icon}`]:{marginLeft:4},[`& .${te.iconSmall}`]:{marginLeft:2},[`& .${te.deleteIcon}`]:{marginRight:5},[`& .${te.deleteIconSmall}`]:{marginRight:3}},c.variant==="outlined"&&c.color!=="default"&&{color:(n.vars||n).palette[c.color].main,border:`1px solid ${n.vars?`rgba(${n.vars.palette[c.color].mainChannel} / 0.7)`:$e(n.palette[c.color].main,.7)}`,[`&.${te.clickable}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette[c.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:$e(n.palette[c.color].main,n.palette.action.hoverOpacity)},[`&.${te.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette[c.color].mainChannel} / ${n.vars.palette.action.focusOpacity})`:$e(n.palette[c.color].main,n.palette.action.focusOpacity)},[`& .${te.deleteIcon}`]:{color:n.vars?`rgba(${n.vars.palette[c.color].mainChannel} / 0.7)`:$e(n.palette[c.color].main,.7),"&:hover, &:active":{color:(n.vars||n).palette[c.color].main}}})),gr=Te("span",{name:"MuiChip",slot:"Label",overridesResolver:(n,c)=>{const{ownerState:T}=n,{size:s}=T;return[c.label,c[`label${Z(s)}`]]}})(({ownerState:n})=>K({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},n.variant==="outlined"&&{paddingLeft:11,paddingRight:11},n.size==="small"&&{paddingLeft:8,paddingRight:8},n.size==="small"&&n.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function gn(n){return n.key==="Backspace"||n.key==="Delete"}const br=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiChip"}),{avatar:e,className:t,clickable:i,color:l="default",component:v,deleteIcon:x,disabled:r=!1,icon:a,label:o,onClick:u,onDelete:b,onKeyDown:A,onKeyUp:$,size:y="medium",variant:P="filled",tabIndex:_,skipFocusWhenDisabled:U=!1}=s,F=ze(s,fr),m=N.useRef(null),M=rr(m,T),p=k=>{k.stopPropagation(),b&&b(k)},g=k=>{k.currentTarget===k.target&&gn(k)&&k.preventDefault(),A&&A(k)},w=k=>{k.currentTarget===k.target&&(b&&gn(k)?b(k):k.key==="Escape"&&m.current&&m.current.blur()),$&&$(k)},j=i!==!1&&u?!0:i,S=j||b?pn:v||"div",I=K({},s,{component:S,disabled:r,size:y,color:l,iconColor:N.isValidElement(a)&&a.props.color||l,onDelete:!!b,clickable:j,variant:P}),C=hr(I),D=S===pn?K({component:v||"div",focusVisibleClassName:C.focusVisible},b&&{disableRipple:!0}):{};let h=null;b&&(h=x&&N.isValidElement(x)?N.cloneElement(x,{className:be(x.props.className,C.deleteIcon),onClick:p}):f.jsx(cr,{className:be(C.deleteIcon),onClick:p}));let d=null;e&&N.isValidElement(e)&&(d=N.cloneElement(e,{className:be(C.avatar,e.props.className)}));let O=null;return a&&N.isValidElement(a)&&(O=N.cloneElement(a,{className:be(C.icon,a.props.className)})),f.jsxs(pr,K({as:S,className:be(C.root,t),disabled:j&&r?!0:void 0,onClick:u,onKeyDown:g,onKeyUp:w,ref:M,tabIndex:U&&r?-1:_,ownerState:I},D,F,{children:[d||O,f.jsx(gr,{className:be(C.label),ownerState:I,children:o}),h]}))}),bn=br;function vr(n){return Ne("MuiDialog",n)}const mr=Oe("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Ht=mr,xr=N.createContext({}),Dn=xr,yr=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Cr=Te(or,{name:"MuiDialog",slot:"Backdrop",overrides:(n,c)=>c.backdrop})({zIndex:-1}),wr=n=>{const{classes:c,scroll:T,maxWidth:s,fullWidth:e,fullScreen:t}=n,i={root:["root"],container:["container",`scroll${Z(T)}`],paper:["paper",`paperScroll${Z(T)}`,`paperWidth${Z(String(s))}`,e&&"paperFullWidth",t&&"paperFullScreen"]};return He(i,vr,c)},jr=Te(ar,{name:"MuiDialog",slot:"Root",overridesResolver:(n,c)=>c.root})({"@media print":{position:"absolute !important"}}),Tr=Te("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,c)=>{const{ownerState:T}=n;return[c.container,c[`scroll${Z(T.scroll)}`]]}})(({ownerState:n})=>K({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Sr=Te(Jt,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,c)=>{const{ownerState:T}=n;return[c.paper,c[`scrollPaper${Z(T.scroll)}`],c[`paperWidth${Z(String(T.maxWidth))}`],T.fullWidth&&c.paperFullWidth,T.fullScreen&&c.paperFullScreen]}})(({theme:n,ownerState:c})=>K({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},c.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},c.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!c.maxWidth&&{maxWidth:"calc(100% - 64px)"},c.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${Ht.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},c.maxWidth&&c.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[c.maxWidth]}${n.breakpoints.unit}`,[`&.${Ht.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[c.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},c.fullWidth&&{width:"calc(100% - 64px)"},c.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Ht.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Dr=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiDialog"}),e=sr(),t={enter:e.transitions.duration.enteringScreen,exit:e.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":l,BackdropComponent:v,BackdropProps:x,children:r,className:a,disableEscapeKeyDown:o=!1,fullScreen:u=!1,fullWidth:b=!1,maxWidth:A="sm",onBackdropClick:$,onClose:y,open:P,PaperComponent:_=Jt,PaperProps:U={},scroll:F="paper",TransitionComponent:m=lr,transitionDuration:M=t,TransitionProps:p}=s,g=ze(s,yr),w=K({},s,{disableEscapeKeyDown:o,fullScreen:u,fullWidth:b,maxWidth:A,scroll:F}),j=wr(w),S=N.useRef(),I=d=>{S.current=d.target===d.currentTarget},C=d=>{S.current&&(S.current=null,$&&$(d),y&&y(d,"backdropClick"))},D=ir(l),h=N.useMemo(()=>({titleId:D}),[D]);return f.jsx(jr,K({className:be(j.root,a),closeAfterTransition:!0,components:{Backdrop:Cr},componentsProps:{backdrop:K({transitionDuration:M,as:v},x)},disableEscapeKeyDown:o,onClose:y,open:P,ref:T,onClick:C,ownerState:w},g,{children:f.jsx(m,K({appear:!0,in:P,timeout:M,role:"presentation"},p,{children:f.jsx(Tr,{className:be(j.container),onMouseDown:I,ownerState:w,children:f.jsx(Sr,K({as:_,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":D},U,{className:be(j.paper,U.className),ownerState:w,children:f.jsx(Dn.Provider,{value:h,children:r})}))})}))}))}),dt=Dr;function Ar(n){return Ne("MuiDialogActions",n)}Oe("MuiDialogActions",["root","spacing"]);const kr=["className","disableSpacing"],Ir=n=>{const{classes:c,disableSpacing:T}=n;return He({root:["root",!T&&"spacing"]},Ar,c)},$r=Te("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(n,c)=>{const{ownerState:T}=n;return[c.root,!T.disableSpacing&&c.spacing]}})(({ownerState:n})=>K({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Ur=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiDialogActions"}),{className:e,disableSpacing:t=!1}=s,i=ze(s,kr),l=K({},s,{disableSpacing:t}),v=Ir(l);return f.jsx($r,K({className:be(v.root,e),ownerState:l,ref:T},i))}),vt=Ur;function Rr(n){return Ne("MuiDialogContent",n)}Oe("MuiDialogContent",["root","dividers"]);function Mr(n){return Ne("MuiDialogTitle",n)}const _r=Oe("MuiDialogTitle",["root"]),Fr=_r,Pr=["className","dividers"],Er=n=>{const{classes:c,dividers:T}=n;return He({root:["root",T&&"dividers"]},Rr,c)},Or=Te("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(n,c)=>{const{ownerState:T}=n;return[c.root,T.dividers&&c.dividers]}})(({theme:n,ownerState:c})=>K({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},c.dividers?{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}:{[`.${Fr.root} + &`]:{paddingTop:0}})),Nr=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiDialogContent"}),{className:e,dividers:t=!1}=s,i=ze(s,Pr),l=K({},s,{dividers:t}),v=Er(l);return f.jsx(Or,K({className:be(v.root,e),ownerState:l,ref:T},i))}),ut=Nr;function Br(n){return Ne("MuiDialogContentText",n)}Oe("MuiDialogContentText",["root"]);const zr=["children","className"],Hr=n=>{const{classes:c}=n,s=He({root:["root"]},Br,c);return K({},c,s)},Wr=Te(Zt,{shouldForwardProp:n=>qn(n)||n==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,c)=>c.root})({}),Lr=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiDialogContentText"}),{className:e}=s,t=ze(s,zr),i=Hr(t);return f.jsx(Wr,K({component:"p",variant:"body1",color:"text.secondary",ref:T,ownerState:t,className:be(i.root,e)},s,{classes:i}))}),Dt=Lr,Vr=["className","id"],Qr=n=>{const{classes:c}=n;return He({root:["root"]},Mr,c)},qr=Te(Zt,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(n,c)=>c.root})({padding:"16px 24px",flex:"0 0 auto"}),Yr=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiDialogTitle"}),{className:e,id:t}=s,i=ze(s,Vr),l=s,v=Qr(l),{titleId:x=t}=N.useContext(Dn);return f.jsx(qr,K({component:"h2",className:be(v.root,e),ownerState:l,ref:T,variant:"h6",id:t??x},i))}),mt=Yr,Kr=N.createContext(),An=Kr;function Zr(n){return Ne("MuiTable",n)}Oe("MuiTable",["root","stickyHeader"]);const Gr=["className","component","padding","size","stickyHeader"],Xr=n=>{const{classes:c,stickyHeader:T}=n;return He({root:["root",T&&"stickyHeader"]},Zr,c)},Jr=Te("table",{name:"MuiTable",slot:"Root",overridesResolver:(n,c)=>{const{ownerState:T}=n;return[c.root,T.stickyHeader&&c.stickyHeader]}})(({theme:n,ownerState:c})=>K({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":K({},n.typography.body2,{padding:n.spacing(2),color:(n.vars||n).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},c.stickyHeader&&{borderCollapse:"separate"})),vn="table",eo=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiTable"}),{className:e,component:t=vn,padding:i="normal",size:l="medium",stickyHeader:v=!1}=s,x=ze(s,Gr),r=K({},s,{component:t,padding:i,size:l,stickyHeader:v}),a=Xr(r),o=N.useMemo(()=>({padding:i,size:l,stickyHeader:v}),[i,l,v]);return f.jsx(An.Provider,{value:o,children:f.jsx(Jr,K({as:t,role:t===vn?null:"table",ref:T,className:be(a.root,e),ownerState:r},x))})}),to=eo,no=N.createContext(),Et=no;function ro(n){return Ne("MuiTableBody",n)}Oe("MuiTableBody",["root"]);const oo=["className","component"],ao=n=>{const{classes:c}=n;return He({root:["root"]},ro,c)},so=Te("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(n,c)=>c.root})({display:"table-row-group"}),io={variant:"body"},mn="tbody",lo=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiTableBody"}),{className:e,component:t=mn}=s,i=ze(s,oo),l=K({},s,{component:t}),v=ao(l);return f.jsx(Et.Provider,{value:io,children:f.jsx(so,K({className:be(v.root,e),as:t,ref:T,role:t===mn?null:"rowgroup",ownerState:l},i))})}),co=lo;function uo(n){return Ne("MuiTableCell",n)}const fo=Oe("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ho=fo,po=["align","className","component","padding","scope","size","sortDirection","variant"],go=n=>{const{classes:c,variant:T,align:s,padding:e,size:t,stickyHeader:i}=n,l={root:["root",T,i&&"stickyHeader",s!=="inherit"&&`align${Z(s)}`,e!=="normal"&&`padding${Z(e)}`,`size${Z(t)}`]};return He(l,uo,c)},bo=Te("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(n,c)=>{const{ownerState:T}=n;return[c.root,c[T.variant],c[`size${Z(T.size)}`],T.padding!=="normal"&&c[`padding${Z(T.padding)}`],T.align!=="inherit"&&c[`align${Z(T.align)}`],T.stickyHeader&&c.stickyHeader]}})(({theme:n,ownerState:c})=>K({},n.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:n.vars?`1px solid ${n.vars.palette.TableCell.border}`:`1px solid
    ${n.palette.mode==="light"?Yn($e(n.palette.divider,1),.88):Kn($e(n.palette.divider,1),.68)}`,textAlign:"left",padding:16},c.variant==="head"&&{color:(n.vars||n).palette.text.primary,lineHeight:n.typography.pxToRem(24),fontWeight:n.typography.fontWeightMedium},c.variant==="body"&&{color:(n.vars||n).palette.text.primary},c.variant==="footer"&&{color:(n.vars||n).palette.text.secondary,lineHeight:n.typography.pxToRem(21),fontSize:n.typography.pxToRem(12)},c.size==="small"&&{padding:"6px 16px",[`&.${ho.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},c.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},c.padding==="none"&&{padding:0},c.align==="left"&&{textAlign:"left"},c.align==="center"&&{textAlign:"center"},c.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},c.align==="justify"&&{textAlign:"justify"},c.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(n.vars||n).palette.background.default})),vo=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiTableCell"}),{align:e="inherit",className:t,component:i,padding:l,scope:v,size:x,sortDirection:r,variant:a}=s,o=ze(s,po),u=N.useContext(An),b=N.useContext(Et),A=b&&b.variant==="head";let $;i?$=i:$=A?"th":"td";let y=v;$==="td"?y=void 0:!y&&A&&(y="col");const P=a||b&&b.variant,_=K({},s,{align:e,component:$,padding:l||(u&&u.padding?u.padding:"normal"),size:x||(u&&u.size?u.size:"medium"),sortDirection:r,stickyHeader:P==="head"&&u&&u.stickyHeader,variant:P}),U=go(_);let F=null;return r&&(F=r==="asc"?"ascending":"descending"),f.jsx(bo,K({as:$,ref:T,className:be(U.root,t),"aria-sort":F,scope:y,ownerState:_},o))}),Me=vo;function mo(n){return Ne("MuiTableContainer",n)}Oe("MuiTableContainer",["root"]);const xo=["className","component"],yo=n=>{const{classes:c}=n;return He({root:["root"]},mo,c)},Co=Te("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(n,c)=>c.root})({width:"100%",overflowX:"auto"}),wo=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiTableContainer"}),{className:e,component:t="div"}=s,i=ze(s,xo),l=K({},s,{component:t}),v=yo(l);return f.jsx(Co,K({ref:T,as:t,className:be(v.root,e),ownerState:l},i))}),jo=wo;function To(n){return Ne("MuiTableHead",n)}Oe("MuiTableHead",["root"]);const So=["className","component"],Do=n=>{const{classes:c}=n;return He({root:["root"]},To,c)},Ao=Te("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(n,c)=>c.root})({display:"table-header-group"}),ko={variant:"head"},xn="thead",Io=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiTableHead"}),{className:e,component:t=xn}=s,i=ze(s,So),l=K({},s,{component:t}),v=Do(l);return f.jsx(Et.Provider,{value:ko,children:f.jsx(Ao,K({as:t,className:be(v.root,e),ref:T,role:t===xn?null:"rowgroup",ownerState:l},i))})}),$o=Io;function Uo(n){return Ne("MuiTableRow",n)}const Ro=Oe("MuiTableRow",["root","selected","hover","head","footer"]),yn=Ro,Mo=["className","component","hover","selected"],_o=n=>{const{classes:c,selected:T,hover:s,head:e,footer:t}=n;return He({root:["root",T&&"selected",s&&"hover",e&&"head",t&&"footer"]},Uo,c)},Fo=Te("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(n,c)=>{const{ownerState:T}=n;return[c.root,T.head&&c.head,T.footer&&c.footer]}})(({theme:n})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${yn.hover}:hover`]:{backgroundColor:(n.vars||n).palette.action.hover},[`&.${yn.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:$e(n.palette.primary.main,n.palette.action.selectedOpacity),"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:$e(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}}})),Cn="tr",Po=N.forwardRef(function(c,T){const s=Be({props:c,name:"MuiTableRow"}),{className:e,component:t=Cn,hover:i=!1,selected:l=!1}=s,v=ze(s,Mo),x=N.useContext(Et),r=K({},s,{component:t,hover:i,selected:l,head:x&&x.variant==="head",footer:x&&x.variant==="footer"}),a=_o(r);return f.jsx(Fo,K({as:t,ref:T,className:be(a.root,e),role:t===Cn?null:"row",ownerState:r},v))}),Wt=Po,Eo=Tn.forwardRef(function(c,T){return f.jsx(ft,{elevation:6,ref:T,variant:"filled",...c})}),Oo=()=>{const[n,c]=N.useState(!1),[T,s]=N.useState(!1),[e,t]=N.useState("");console.log("Logout loaded");const i=()=>{c(!0)},l=()=>{c(!1)},v=()=>{const x=Zn();Gn(x).then(()=>{c(!1),s(!0),t("Logged out successfully")}).catch(r=>{c(!1),s(!0),t("Logout failed: "+r.message)})};return f.jsxs(f.Fragment,{children:[f.jsx(_e,{variant:"outlined",onClick:i,sx:{fontSize:"1rem",mt:2,textTransform:"none",minWidth:"100px",color:"currentColor",borderColor:"rgba(255, 0, 0, 0.5)",boxShadow:"none","&:hover":{borderColor:"rgba(255, 0, 0, 0.7)",backgroundColor:"rgba(255, 0, 0, 0.1)",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.2)",color:"currentColor",transform:"scale(1.05)"},transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out, background-color 0.3s ease-in-out"},children:"Logout"}),f.jsxs(dt,{open:n,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[f.jsx(mt,{id:"alert-dialog-title",children:"Logging Out"}),f.jsx(ut,{children:f.jsx(Dt,{id:"alert-dialog-description",children:"Are you sure you want to log out?"})}),f.jsxs(vt,{children:[f.jsx(_e,{onClick:v,autoFocus:!0,children:"Yes"}),f.jsx(_e,{onClick:l,children:"No"})]})]}),f.jsx(ht,{open:T,autoHideDuration:6e3,onClose:()=>s(!1),children:f.jsx(Eo,{onClose:()=>s(!1),severity:"info",sx:{width:"100%"},children:e})})]})},No=N.memo(({setIsAdding:n})=>{const{userDetails:c}=St();console.log("Header loaded");const[T,s]=N.useState(!1),e=()=>{navigator.clipboard.writeText(c.uid).then(()=>{s(!0)}).catch(i=>{console.error("Could not copy text: ",i)})},t=(i,l)=>{l!=="clickaway"&&s(!1)};return f.jsxs(zt,{sx:{mt:3,mb:2},children:[f.jsx(Zt,{variant:"h4",component:"h1",gutterBottom:!0,textAlign:"left",sx:{fontWeight:"bold"},children:"My Laboratory Notebook"}),c&&f.jsxs(zt,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:[c.isAdmin&&f.jsx(bn,{label:"Admin",variant:"outlined",sx:{borderRadius:"15px",fontWeight:"bold",background:"#ffcdd2",color:"#c62828",mr:1}}),f.jsx(Vt,{title:"Click to Copy",enterDelay:300,leaveDelay:200,children:f.jsx(bn,{label:`User ID: ${c.uid}`,variant:"outlined",onClick:e,sx:{borderRadius:"15px",fontWeight:"bold",background:"#e0f2f1",color:"#00695c",mr:1,cursor:"pointer"}})})]}),f.jsxs(zt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx(_e,{variant:"contained",color:"primary",onClick:()=>n(!0),sx:{fontSize:"1.2rem",mt:2,textTransform:"none",minWidth:"150px",boxShadow:"none","&:hover":{boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.2)",transform:"scale(1.05)"},transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out",border:"1px solid transparent"},children:"+ Create New"}),f.jsx(Oo,{})]}),f.jsx(ht,{open:T,autoHideDuration:6e3,onClose:t,children:f.jsx(ft,{onClose:t,severity:"success",sx:{width:"100%"},children:"User ID copied to clipboard!"})})]})});var en={},Bo=ot;Object.defineProperty(en,"__esModule",{value:!0});var kn=en.default=void 0,zo=Bo(at()),Ho=f;kn=en.default=(0,zo.default)((0,Ho.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var tn={},Wo=ot;Object.defineProperty(tn,"__esModule",{value:!0});var kt=tn.default=void 0,Lo=Wo(at()),Vo=f;kt=tn.default=(0,Lo.default)((0,Vo.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const Qo=({designs:n,handleEdit:c,handleDelete:T,isAdmin:s})=>{const e=i=>i?i._methodName==="serverTimestamp"?"Pending...":(i instanceof Date?i:i.toDate?i.toDate():new Date(i.seconds*1e3)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A",t=i=>{if(!i)return"";let l=i;i instanceof Date&&(l=i.toISOString().split("T")[0]),i.toDate&&(l=i.toDate().toISOString().split("T")[0]);const[v,x,r]=l.split("-").map(o=>parseInt(o,10));return new Date(v,x-1,r).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})};return f.jsx(jo,{component:Jt,children:f.jsxs(to,{sx:{"& .MuiTableCell-root":{fontSize:"1rem"},"& .MuiTableCell-head":{fontSize:"1.2rem",backgroundColor:"#1A76D3",color:"white"}},children:[f.jsx($o,{children:f.jsxs(Wt,{sx:{height:"60px"},children:[f.jsx(Me,{sx:{fontWeight:"bold",width:"40%"},children:"Title"}),s&&f.jsx(Me,{sx:{fontWeight:"bold",width:"20%"},children:"User ID"}),f.jsx(Me,{sx:{fontWeight:"bold",width:"15%"},children:"Created"}),f.jsx(Me,{sx:{fontWeight:"bold",width:"15%"},children:"Due"}),f.jsx(Me,{sx:{fontWeight:"bold",width:"10%"},children:"Edit"}),f.jsx(Me,{sx:{fontWeight:"bold",width:"10%"},children:"Delete"})]})}),f.jsx(co,{children:n&&n.length>0?n.map(i=>f.jsxs(Wt,{sx:{height:"80px"},children:[f.jsx(Me,{children:f.jsx("button",{onClick:()=>c(i.id),className:"hyperlink-style",children:i.title})}),s&&f.jsx(Me,{children:i.userId}),f.jsx(Me,{children:i.dateCreated?e(i.dateCreated):"N/A"}),f.jsx(Me,{children:i.dateDue?t(i.dateDue):"N/A"}),f.jsx(Me,{children:f.jsx(Vt,{title:"Edit",children:f.jsx(rt,{onClick:()=>c(i.id),color:"primary",children:f.jsx(kn,{})})})}),f.jsx(Me,{children:f.jsx(Vt,{title:"Delete",children:f.jsx(rt,{onClick:()=>T(i.id),color:"error",children:f.jsx(kt,{})})})})]},i.id)):f.jsx(Wt,{children:f.jsx(Me,{colSpan:s?6:5,children:"No Designs Found"})})})]})})};function qo(n,c){return c.forEach(function(T){T&&typeof T!="string"&&!Array.isArray(T)&&Object.keys(T).forEach(function(s){if(s!=="default"&&!(s in n)){var e=Object.getOwnPropertyDescriptor(T,s);Object.defineProperty(n,s,e.get?e:{enumerable:!0,get:function(){return T[s]}})}})}),Object.freeze(n)}function In(n,c){return new Promise(function(T,s){let e;return Yo(n).then(function(t){try{return e=t,T(new Blob([c.slice(0,2),e,c.slice(2)],{type:"image/jpeg"}))}catch(i){return s(i)}},s)})}const Yo=n=>new Promise((c,T)=>{const s=new FileReader;s.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let i=0;if(t.getUint16(i)!==65496)return T("not a valid JPEG");for(i+=2;;){const l=t.getUint16(i);if(l===65498)break;const v=t.getUint16(i+2);if(l===65505&&t.getUint32(i+4)===1165519206){const x=i+10;let r;switch(t.getUint16(x)){case 18761:r=!0;break;case 19789:r=!1;break;default:return T("TIFF header contains invalid endian")}if(t.getUint16(x+2,r)!==42)return T("TIFF header contains invalid version");const a=t.getUint32(x+4,r),o=x+a+2+12*t.getUint16(x+a,r);for(let u=x+a+2;u<o;u+=12)if(t.getUint16(u,r)==274){if(t.getUint16(u+2,r)!==3)return T("Orientation data type is invalid");if(t.getUint32(u+4,r)!==1)return T("Orientation data count is invalid");t.setUint16(u+8,1,r);break}return c(e.slice(i,i+2+v))}i+=2+v}return c(new Blob)}),s.readAsArrayBuffer(n)});var Mt={},Ko={get exports(){return Mt},set exports(n){Mt=n}};(function(n){var c,T,s={};Ko.exports=s,s.parse=function(e,t){for(var i=s.bin.readUshort,l=s.bin.readUint,v=0,x={},r=new Uint8Array(e),a=r.length-4;l(r,a)!=101010256;)a--;v=a,v+=4;var o=i(r,v+=4);i(r,v+=2);var u=l(r,v+=2),b=l(r,v+=4);v+=4,v=b;for(var A=0;A<o;A++){l(r,v),v+=4,v+=4,v+=4,l(r,v+=4),u=l(r,v+=4);var $=l(r,v+=4),y=i(r,v+=4),P=i(r,v+2),_=i(r,v+4);v+=6;var U=l(r,v+=8);v+=4,v+=y+P+_,s._readLocal(r,U,x,u,$,t)}return x},s._readLocal=function(e,t,i,l,v,x){var r=s.bin.readUshort,a=s.bin.readUint;a(e,t),r(e,t+=4),r(e,t+=2);var o=r(e,t+=2);a(e,t+=2),a(e,t+=4),t+=4;var u=r(e,t+=8),b=r(e,t+=2);t+=2;var A=s.bin.readUTF8(e,t,u);if(t+=u,t+=b,x)i[A]={size:v,csize:l};else{var $=new Uint8Array(e.buffer,t);if(o==0)i[A]=new Uint8Array($.buffer.slice(t,t+l));else{if(o!=8)throw"unknown compression method: "+o;var y=new Uint8Array(v);s.inflateRaw($,y),i[A]=y}}},s.inflateRaw=function(e,t){return s.F.inflate(e,t)},s.inflate=function(e,t){return e[0],e[1],s.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},s.deflate=function(e,t){t==null&&(t={level:6});var i=0,l=new Uint8Array(50+Math.floor(1.1*e.length));l[i]=120,l[i+1]=156,i+=2,i=s.F.deflateRaw(e,l,i,t.level);var v=s.adler(e,0,e.length);return l[i+0]=v>>>24&255,l[i+1]=v>>>16&255,l[i+2]=v>>>8&255,l[i+3]=v>>>0&255,new Uint8Array(l.buffer,0,i+4)},s.deflateRaw=function(e,t){t==null&&(t={level:6});var i=new Uint8Array(50+Math.floor(1.1*e.length)),l=s.F.deflateRaw(e,i,l,t.level);return new Uint8Array(i.buffer,0,l)},s.encode=function(e,t){t==null&&(t=!1);var i=0,l=s.bin.writeUint,v=s.bin.writeUshort,x={};for(var r in e){var a=!s._noNeed(r)&&!t,o=e[r],u=s.crc.crc(o,0,o.length);x[r]={cpr:a,usize:o.length,crc:u,file:a?s.deflateRaw(o):o}}for(var r in x)i+=x[r].file.length+30+46+2*s.bin.sizeUTF8(r);i+=22;var b=new Uint8Array(i),A=0,$=[];for(var r in x){var y=x[r];$.push(A),A=s._writeHeader(b,A,r,y,0)}var P=0,_=A;for(var r in x)y=x[r],$.push(A),A=s._writeHeader(b,A,r,y,1,$[P++]);var U=A-_;return l(b,A,101010256),A+=4,v(b,A+=4,P),v(b,A+=2,P),l(b,A+=2,U),l(b,A+=4,_),A+=4,A+=2,b.buffer},s._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},s._writeHeader=function(e,t,i,l,v,x){var r=s.bin.writeUint,a=s.bin.writeUshort,o=l.file;return r(e,t,v==0?67324752:33639248),t+=4,v==1&&(t+=2),a(e,t,20),a(e,t+=2,0),a(e,t+=2,l.cpr?8:0),r(e,t+=2,0),r(e,t+=4,l.crc),r(e,t+=4,o.length),r(e,t+=4,l.usize),a(e,t+=4,s.bin.sizeUTF8(i)),a(e,t+=2,0),t+=2,v==1&&(t+=2,t+=2,r(e,t+=6,x),t+=4),t+=s.bin.writeUTF8(e,t,i),v==0&&(e.set(o,t),t+=o.length),t},s.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var i=t,l=0;l<8;l++)1&i?i=3988292384^i>>>1:i>>>=1;e[t]=i}return e}(),update:function(e,t,i,l){for(var v=0;v<l;v++)e=s.crc.table[255&(e^t[i+v])]^e>>>8;return e},crc:function(e,t,i){return 4294967295^s.crc.update(4294967295,e,t,i)}},s.adler=function(e,t,i){for(var l=1,v=0,x=t,r=t+i;x<r;){for(var a=Math.min(x+5552,r);x<a;)v+=l+=e[x++];l%=65521,v%=65521}return v<<16|l},s.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,i){e[t]=255&i,e[t+1]=i>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,i){e[t]=255&i,e[t+1]=i>>8&255,e[t+2]=i>>16&255,e[t+3]=i>>24&255},readASCII:function(e,t,i){for(var l="",v=0;v<i;v++)l+=String.fromCharCode(e[t+v]);return l},writeASCII:function(e,t,i){for(var l=0;l<i.length;l++)e[t+l]=i.charCodeAt(l)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,i){for(var l,v="",x=0;x<i;x++)v+="%"+s.bin.pad(e[t+x].toString(16));try{l=decodeURIComponent(v)}catch{return s.bin.readASCII(e,t,i)}return l},writeUTF8:function(e,t,i){for(var l=i.length,v=0,x=0;x<l;x++){var r=i.charCodeAt(x);if(!(4294967168&r))e[t+v]=r,v++;else if(!(4294965248&r))e[t+v]=192|r>>6,e[t+v+1]=128|r>>0&63,v+=2;else if(!(4294901760&r))e[t+v]=224|r>>12,e[t+v+1]=128|r>>6&63,e[t+v+2]=128|r>>0&63,v+=3;else{if(4292870144&r)throw"e";e[t+v]=240|r>>18,e[t+v+1]=128|r>>12&63,e[t+v+2]=128|r>>6&63,e[t+v+3]=128|r>>0&63,v+=4}}return v},sizeUTF8:function(e){for(var t=e.length,i=0,l=0;l<t;l++){var v=e.charCodeAt(l);if(!(4294967168&v))i++;else if(!(4294965248&v))i+=2;else if(!(4294901760&v))i+=3;else{if(4292870144&v)throw"e";i+=4}}return i}},s.F={},s.F.deflateRaw=function(e,t,i,l){var v=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],x=s.F.U,r=s.F._goodIndex;s.F._hash;var a=s.F._putsE,o=0,u=i<<3,b=0,A=e.length;if(l==0){for(;o<A;)a(t,u,o+(j=Math.min(65535,A-o))==A?1:0),u=s.F._copyExact(e,o,j,t,u+8),o+=j;return u>>>3}var $=x.lits,y=x.strt,P=x.prev,_=0,U=0,F=0,m=0,M=0,p=0;for(A>2&&(y[p=s.F._hash(e,0)]=0),o=0;o<A;o++){if(M=p,o+1<A-2){p=s.F._hash(e,o+1);var g=o+1&32767;P[g]=y[p],y[p]=g}if(b<=o){(_>14e3||U>26697)&&A-o>100&&(b<o&&($[_]=o-b,_+=2,b=o),u=s.F._writeBlock(o==A-1||b==A?1:0,$,_,m,e,F,o-F,t,u),_=U=m=0,F=o);var w=0;o<A-2&&(w=s.F._bestMatch(e,o,P,M,Math.min(v[2],A-o),v[3]));var j=w>>>16,S=65535&w;if(w!=0){S=65535&w;var I=r(j=w>>>16,x.of0);x.lhst[257+I]++;var C=r(S,x.df0);x.dhst[C]++,m+=x.exb[I]+x.dxb[C],$[_]=j<<23|o-b,$[_+1]=S<<16|I<<8|C,_+=2,b=o+j}else x.lhst[e[o]]++;U++}}for(F==o&&e.length!=0||(b<o&&($[_]=o-b,_+=2,b=o),u=s.F._writeBlock(1,$,_,m,e,F,o-F,t,u),_=0,U=0,_=U=m=0,F=o);7&u;)u++;return u>>>3},s.F._bestMatch=function(e,t,i,l,v,x){var r=32767&t,a=i[r],o=r-a+32768&32767;if(a==r||l!=s.F._hash(e,t-o))return 0;for(var u=0,b=0,A=Math.min(32767,t);o<=A&&--x!=0&&a!=r;){if(u==0||e[t+u]==e[t+u-o]){var $=s.F._howLong(e,t,o);if($>u){if(b=o,(u=$)>=v)break;o+2<$&&($=o+2);for(var y=0,P=0;P<$-2;P++){var _=t-o+P+32768&32767,U=_-i[_]+32768&32767;U>y&&(y=U,a=_)}}}o+=(r=a)-(a=i[r])+32768&32767}return u<<16|b},s.F._howLong=function(e,t,i){if(e[t]!=e[t-i]||e[t+1]!=e[t+1-i]||e[t+2]!=e[t+2-i])return 0;var l=t,v=Math.min(e.length,t+258);for(t+=3;t<v&&e[t]==e[t-i];)t++;return t-l},s.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(e,t,i,l,v,x,r,a,o){var u,b,A,$,y,P,_,U,F,m=s.F.U,M=s.F._putsF,p=s.F._putsE;m.lhst[256]++,b=(u=s.F.getTrees())[0],A=u[1],$=u[2],y=u[3],P=u[4],_=u[5],U=u[6],F=u[7];var g=32+(o+3&7?8-(o+3&7):0)+(r<<3),w=l+s.F.contSize(m.fltree,m.lhst)+s.F.contSize(m.fdtree,m.dhst),j=l+s.F.contSize(m.ltree,m.lhst)+s.F.contSize(m.dtree,m.dhst);j+=14+3*_+s.F.contSize(m.itree,m.ihst)+(2*m.ihst[16]+3*m.ihst[17]+7*m.ihst[18]);for(var S=0;S<286;S++)m.lhst[S]=0;for(S=0;S<30;S++)m.dhst[S]=0;for(S=0;S<19;S++)m.ihst[S]=0;var I=g<w&&g<j?0:w<j?1:2;if(M(a,o,e),M(a,o+1,I),o+=3,I==0){for(;7&o;)o++;o=s.F._copyExact(v,x,r,a,o)}else{var C,D;if(I==1&&(C=m.fltree,D=m.fdtree),I==2){s.F.makeCodes(m.ltree,b),s.F.revCodes(m.ltree,b),s.F.makeCodes(m.dtree,A),s.F.revCodes(m.dtree,A),s.F.makeCodes(m.itree,$),s.F.revCodes(m.itree,$),C=m.ltree,D=m.dtree,p(a,o,y-257),p(a,o+=5,P-1),p(a,o+=5,_-4),o+=4;for(var h=0;h<_;h++)p(a,o+3*h,m.itree[1+(m.ordr[h]<<1)]);o+=3*_,o=s.F._codeTiny(U,m.itree,a,o),o=s.F._codeTiny(F,m.itree,a,o)}for(var d=x,O=0;O<i;O+=2){for(var k=t[O],B=k>>>23,Q=d+(8388607&k);d<Q;)o=s.F._writeLit(v[d++],C,a,o);if(B!=0){var W=t[O+1],V=W>>16,z=W>>8&255,E=255&W;p(a,o=s.F._writeLit(257+z,C,a,o),B-m.of0[z]),o+=m.exb[z],M(a,o=s.F._writeLit(E,D,a,o),V-m.df0[E]),o+=m.dxb[E],d+=B}}o=s.F._writeLit(256,C,a,o)}return o},s.F._copyExact=function(e,t,i,l,v){var x=v>>>3;return l[x]=i,l[x+1]=i>>>8,l[x+2]=255-l[x],l[x+3]=255-l[x+1],x+=4,l.set(new Uint8Array(e.buffer,t,i),x),v+(i+4<<3)},s.F.getTrees=function(){for(var e=s.F.U,t=s.F._hufTree(e.lhst,e.ltree,15),i=s.F._hufTree(e.dhst,e.dtree,15),l=[],v=s.F._lenCodes(e.ltree,l),x=[],r=s.F._lenCodes(e.dtree,x),a=0;a<l.length;a+=2)e.ihst[l[a]]++;for(a=0;a<x.length;a+=2)e.ihst[x[a]]++;for(var o=s.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&e.itree[1+(e.ordr[u-1]<<1)]==0;)u--;return[t,i,o,v,r,u,l,x]},s.F.getSecond=function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(e[i+1]);return t},s.F.nonZero=function(e){for(var t="",i=0;i<e.length;i+=2)e[i+1]!=0&&(t+=(i>>1)+",");return t},s.F.contSize=function(e,t){for(var i=0,l=0;l<t.length;l++)i+=t[l]*e[1+(l<<1)];return i},s.F._codeTiny=function(e,t,i,l){for(var v=0;v<e.length;v+=2){var x=e[v],r=e[v+1];l=s.F._writeLit(x,t,i,l);var a=x==16?2:x==17?3:7;x>15&&(s.F._putsE(i,l,r,a),l+=a)}return l},s.F._lenCodes=function(e,t){for(var i=e.length;i!=2&&e[i-1]==0;)i-=2;for(var l=0;l<i;l+=2){var v=e[l+1],x=l+3<i?e[l+3]:-1,r=l+5<i?e[l+5]:-1,a=l==0?-1:e[l-1];if(v==0&&x==v&&r==v){for(var o=l+5;o+2<i&&e[o+2]==v;)o+=2;(u=Math.min(o+1-l>>>1,138))<11?t.push(17,u-3):t.push(18,u-11),l+=2*u-2}else if(v==a&&x==v&&r==v){for(o=l+5;o+2<i&&e[o+2]==v;)o+=2;var u=Math.min(o+1-l>>>1,6);t.push(16,u-3),l+=2*u-2}else t.push(v,0)}return i>>>1},s.F._hufTree=function(e,t,i){var l=[],v=e.length,x=t.length,r=0;for(r=0;r<x;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<v;r++)e[r]!=0&&l.push({lit:r,f:e[r]});var a=l.length,o=l.slice(0);if(a==0)return 0;if(a==1){var u=l[0].lit;return o=u==0?1:0,t[1+(u<<1)]=1,t[1+(o<<1)]=1,1}l.sort(function(U,F){return U.f-F.f});var b=l[0],A=l[1],$=0,y=1,P=2;for(l[0]={lit:-1,f:b.f+A.f,l:b,r:A,d:0};y!=a-1;)b=$!=y&&(P==a||l[$].f<l[P].f)?l[$++]:l[P++],A=$!=y&&(P==a||l[$].f<l[P].f)?l[$++]:l[P++],l[y++]={lit:-1,f:b.f+A.f,l:b,r:A};var _=s.F.setDepth(l[y-1],0);for(_>i&&(s.F.restrictDepth(o,i,_),_=i),r=0;r<a;r++)t[1+(o[r].lit<<1)]=o[r].d;return _},s.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(s.F.setDepth(e.l,t+1),s.F.setDepth(e.r,t+1))},s.F.restrictDepth=function(e,t,i){var l=0,v=1<<i-t,x=0;for(e.sort(function(a,o){return o.d==a.d?a.f-o.f:o.d-a.d}),l=0;l<e.length&&e[l].d>t;l++){var r=e[l].d;e[l].d=t,x+=v-(1<<i-r)}for(x>>>=i-t;x>0;)(r=e[l].d)<t?(e[l].d++,x-=1<<t-r-1):l++;for(;l>=0;l--)e[l].d==t&&x<0&&(e[l].d--,x++);x!=0&&console.log("debt left")},s.F._goodIndex=function(e,t){var i=0;return t[16|i]<=e&&(i|=16),t[8|i]<=e&&(i|=8),t[4|i]<=e&&(i|=4),t[2|i]<=e&&(i|=2),t[1|i]<=e&&(i|=1),i},s.F._writeLit=function(e,t,i,l){return s.F._putsF(i,l,t[e<<1]),l+t[1+(e<<1)]},s.F.inflate=function(e,t){var i=Uint8Array;if(e[0]==3&&e[1]==0)return t||new i(0);var l=s.F,v=l._bitsF,x=l._bitsE,r=l._decodeTiny,a=l.makeCodes,o=l.codes2map,u=l._get17,b=l.U,A=t==null;A&&(t=new i(e.length>>>2<<3));for(var $,y,P=0,_=0,U=0,F=0,m=0,M=0,p=0,g=0,w=0;P==0;)if(P=v(e,w,1),_=v(e,w+1,2),w+=3,_!=0){if(A&&(t=s.F._check(t,g+(1<<17))),_==1&&($=b.flmap,y=b.fdmap,M=511,p=31),_==2){U=x(e,w,5)+257,F=x(e,w+5,5)+1,m=x(e,w+10,4)+4,w+=14;for(var j=0;j<38;j+=2)b.itree[j]=0,b.itree[j+1]=0;var S=1;for(j=0;j<m;j++){var I=x(e,w+3*j,3);b.itree[1+(b.ordr[j]<<1)]=I,I>S&&(S=I)}w+=3*m,a(b.itree,S),o(b.itree,S,b.imap),$=b.lmap,y=b.dmap,w=r(b.imap,(1<<S)-1,U+F,e,w,b.ttree);var C=l._copyOut(b.ttree,0,U,b.ltree);M=(1<<C)-1;var D=l._copyOut(b.ttree,U,F,b.dtree);p=(1<<D)-1,a(b.ltree,C),o(b.ltree,C,$),a(b.dtree,D),o(b.dtree,D,y)}for(;;){var h=$[u(e,w)&M];w+=15&h;var d=h>>>4;if(!(d>>>8))t[g++]=d;else{if(d==256)break;var O=g+d-254;if(d>264){var k=b.ldef[d-257];O=g+(k>>>3)+x(e,w,7&k),w+=7&k}var B=y[u(e,w)&p];w+=15&B;var Q=B>>>4,W=b.ddef[Q],V=(W>>>4)+v(e,w,15&W);for(w+=15&W,A&&(t=s.F._check(t,g+(1<<17)));g<O;)t[g]=t[g++-V],t[g]=t[g++-V],t[g]=t[g++-V],t[g]=t[g++-V];g=O}}}else{7&w&&(w+=8-(7&w));var z=4+(w>>>3),E=e[z-4]|e[z-3]<<8;A&&(t=s.F._check(t,g+E)),t.set(new i(e.buffer,e.byteOffset+z,E),g),w=z+E<<3,g+=E}return t.length==g?t:t.slice(0,g)},s.F._check=function(e,t){var i=e.length;if(t<=i)return e;var l=new Uint8Array(Math.max(i<<1,t));return l.set(e,0),l},s.F._decodeTiny=function(e,t,i,l,v,x){for(var r=s.F._bitsE,a=s.F._get17,o=0;o<i;){var u=e[a(l,v)&t];v+=15&u;var b=u>>>4;if(b<=15)x[o]=b,o++;else{var A=0,$=0;b==16?($=3+r(l,v,2),v+=2,A=x[o-1]):b==17?($=3+r(l,v,3),v+=3):b==18&&($=11+r(l,v,7),v+=7);for(var y=o+$;o<y;)x[o]=A,o++}}return v},s.F._copyOut=function(e,t,i,l){for(var v=0,x=0,r=l.length>>>1;x<i;){var a=e[x+t];l[x<<1]=0,l[1+(x<<1)]=a,a>v&&(v=a),x++}for(;x<r;)l[x<<1]=0,l[1+(x<<1)]=0,x++;return v},s.F.makeCodes=function(e,t){for(var i,l,v,x,r=s.F.U,a=e.length,o=r.bl_count,u=0;u<=t;u++)o[u]=0;for(u=1;u<a;u+=2)o[e[u]]++;var b=r.next_code;for(i=0,o[0]=0,l=1;l<=t;l++)i=i+o[l-1]<<1,b[l]=i;for(v=0;v<a;v+=2)(x=e[v+1])!=0&&(e[v]=b[x],b[x]++)},s.F.codes2map=function(e,t,i){for(var l=e.length,v=s.F.U.rev15,x=0;x<l;x+=2)if(e[x+1]!=0)for(var r=x>>1,a=e[x+1],o=r<<4|a,u=t-a,b=e[x]<<u,A=b+(1<<u);b!=A;)i[v[b]>>>15-t]=o,b++},s.F.revCodes=function(e,t){for(var i=s.F.U.rev15,l=15-t,v=0;v<e.length;v+=2){var x=e[v]<<t-e[v+1];e[v]=i[x]>>>l}},s.F._putsE=function(e,t,i){i<<=7&t;var l=t>>>3;e[l]|=i,e[l+1]|=i>>>8},s.F._putsF=function(e,t,i){i<<=7&t;var l=t>>>3;e[l]|=i,e[l+1]|=i>>>8,e[l+2]|=i>>>16},s.F._bitsE=function(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<i)-1},s.F._bitsF=function(e,t,i){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<i)-1},s.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},s.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},s.F.U=(c=Uint16Array,T=Uint32Array,{next_code:new c(16),bl_count:new c(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new c(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new T(32),flmap:new c(512),fltree:[],fdmap:new c(32),fdtree:[],lmap:new c(32768),ltree:[],ttree:[],dmap:new c(32768),dtree:[],imap:new c(512),itree:[],rev15:new c(32768),lhst:new T(286),dhst:new T(30),ihst:new T(19),lits:new T(15e3),strt:new c(65536),prev:new c(32768)}),function(){for(var e=s.F.U,t=0;t<32768;t++){var i=t;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,e.rev15[t]=(i>>>16|i<<16)>>>17}function l(v,x,r){for(;x--!=0;)v.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];l(e.fltree,144,8),l(e.fltree,112,9),l(e.fltree,24,7),l(e.fltree,8,8),s.F.makeCodes(e.fltree,9),s.F.codes2map(e.fltree,9,e.flmap),s.F.revCodes(e.fltree,9),l(e.fdtree,32,5),s.F.makeCodes(e.fdtree,5),s.F.codes2map(e.fdtree,5,e.fdmap),s.F.revCodes(e.fdtree,5),l(e.itree,19,0),l(e.ltree,286,0),l(e.dtree,30,0),l(e.ttree,320,0)}()})();var Zo=qo({__proto__:null,default:Mt},[Mt]);const Ve=function(){var n={nextZero(r,a){for(;r[a]!=0;)a++;return a},readUshort:(r,a)=>r[a]<<8|r[a+1],writeUshort(r,a,o){r[a]=o>>8&255,r[a+1]=255&o},readUint:(r,a)=>16777216*r[a]+(r[a+1]<<16|r[a+2]<<8|r[a+3]),writeUint(r,a,o){r[a]=o>>24&255,r[a+1]=o>>16&255,r[a+2]=o>>8&255,r[a+3]=255&o},readASCII(r,a,o){let u="";for(let b=0;b<o;b++)u+=String.fromCharCode(r[a+b]);return u},writeASCII(r,a,o){for(let u=0;u<o.length;u++)r[a+u]=o.charCodeAt(u)},readBytes(r,a,o){const u=[];for(let b=0;b<o;b++)u.push(r[a+b]);return u},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,a,o){let u,b="";for(let A=0;A<o;A++)b+=`%${n.pad(r[a+A].toString(16))}`;try{u=decodeURIComponent(b)}catch{return n.readASCII(r,a,o)}return u}};function c(r,a,o,u){const b=a*o,A=t(u),$=Math.ceil(a*A/8),y=new Uint8Array(4*b),P=new Uint32Array(y.buffer),{ctype:_}=u,{depth:U}=u,F=n.readUshort;if(_==6){const k=b<<2;if(U==8)for(var m=0;m<k;m+=4)y[m]=r[m],y[m+1]=r[m+1],y[m+2]=r[m+2],y[m+3]=r[m+3];if(U==16)for(m=0;m<k;m++)y[m]=r[m<<1]}else if(_==2){const k=u.tabs.tRNS;if(k==null){if(U==8)for(m=0;m<b;m++){var M=3*m;P[m]=255<<24|r[M+2]<<16|r[M+1]<<8|r[M]}if(U==16)for(m=0;m<b;m++)M=6*m,P[m]=255<<24|r[M+4]<<16|r[M+2]<<8|r[M]}else{var p=k[0];const B=k[1],Q=k[2];if(U==8)for(m=0;m<b;m++){var g=m<<2;M=3*m,P[m]=255<<24|r[M+2]<<16|r[M+1]<<8|r[M],r[M]==p&&r[M+1]==B&&r[M+2]==Q&&(y[g+3]=0)}if(U==16)for(m=0;m<b;m++)g=m<<2,M=6*m,P[m]=255<<24|r[M+4]<<16|r[M+2]<<8|r[M],F(r,M)==p&&F(r,M+2)==B&&F(r,M+4)==Q&&(y[g+3]=0)}}else if(_==3){const k=u.tabs.PLTE,B=u.tabs.tRNS,Q=B?B.length:0;if(U==1)for(var w=0;w<o;w++){var j=w*$,S=w*a;for(m=0;m<a;m++){g=S+m<<2;var I=3*(C=r[j+(m>>3)]>>7-((7&m)<<0)&1);y[g]=k[I],y[g+1]=k[I+1],y[g+2]=k[I+2],y[g+3]=C<Q?B[C]:255}}if(U==2)for(w=0;w<o;w++)for(j=w*$,S=w*a,m=0;m<a;m++)g=S+m<<2,I=3*(C=r[j+(m>>2)]>>6-((3&m)<<1)&3),y[g]=k[I],y[g+1]=k[I+1],y[g+2]=k[I+2],y[g+3]=C<Q?B[C]:255;if(U==4)for(w=0;w<o;w++)for(j=w*$,S=w*a,m=0;m<a;m++)g=S+m<<2,I=3*(C=r[j+(m>>1)]>>4-((1&m)<<2)&15),y[g]=k[I],y[g+1]=k[I+1],y[g+2]=k[I+2],y[g+3]=C<Q?B[C]:255;if(U==8)for(m=0;m<b;m++){var C;g=m<<2,I=3*(C=r[m]),y[g]=k[I],y[g+1]=k[I+1],y[g+2]=k[I+2],y[g+3]=C<Q?B[C]:255}}else if(_==4){if(U==8)for(m=0;m<b;m++){g=m<<2;var D=r[h=m<<1];y[g]=D,y[g+1]=D,y[g+2]=D,y[g+3]=r[h+1]}if(U==16)for(m=0;m<b;m++){var h;g=m<<2,D=r[h=m<<2],y[g]=D,y[g+1]=D,y[g+2]=D,y[g+3]=r[h+2]}}else if(_==0)for(p=u.tabs.tRNS?u.tabs.tRNS:-1,w=0;w<o;w++){const k=w*$,B=w*a;if(U==1)for(var d=0;d<a;d++){var O=(D=255*(r[k+(d>>>3)]>>>7-(7&d)&1))==255*p?0:255;P[B+d]=O<<24|D<<16|D<<8|D}else if(U==2)for(d=0;d<a;d++)O=(D=85*(r[k+(d>>>2)]>>>6-((3&d)<<1)&3))==85*p?0:255,P[B+d]=O<<24|D<<16|D<<8|D;else if(U==4)for(d=0;d<a;d++)O=(D=17*(r[k+(d>>>1)]>>>4-((1&d)<<2)&15))==17*p?0:255,P[B+d]=O<<24|D<<16|D<<8|D;else if(U==8)for(d=0;d<a;d++)O=(D=r[k+d])==p?0:255,P[B+d]=O<<24|D<<16|D<<8|D;else if(U==16)for(d=0;d<a;d++)D=r[k+(d<<1)],O=F(r,k+(d<<1))==p?0:255,P[B+d]=O<<24|D<<16|D<<8|D}return y}function T(r,a,o,u){const b=t(r),A=Math.ceil(o*b/8),$=new Uint8Array((A+1+r.interlace)*u);return a=r.tabs.CgBI?e(a,$):s(a,$),r.interlace==0?a=i(a,r,0,o,u):r.interlace==1&&(a=function(P,_){const U=_.width,F=_.height,m=t(_),M=m>>3,p=Math.ceil(U*m/8),g=new Uint8Array(F*p);let w=0;const j=[0,0,4,0,2,0,1],S=[0,4,0,2,0,1,0],I=[8,8,8,4,4,2,2],C=[8,8,4,4,2,2,1];let D=0;for(;D<7;){const d=I[D],O=C[D];let k=0,B=0,Q=j[D];for(;Q<F;)Q+=d,B++;let W=S[D];for(;W<U;)W+=O,k++;const V=Math.ceil(k*m/8);i(P,_,w,k,B);let z=0,E=j[D];for(;E<F;){let q=S[D],le=w+z*V<<3;for(;q<U;){var h;if(m==1&&(h=(h=P[le>>3])>>7-(7&le)&1,g[E*p+(q>>3)]|=h<<7-((7&q)<<0)),m==2&&(h=(h=P[le>>3])>>6-(7&le)&3,g[E*p+(q>>2)]|=h<<6-((3&q)<<1)),m==4&&(h=(h=P[le>>3])>>4-(7&le)&15,g[E*p+(q>>1)]|=h<<4-((1&q)<<2)),m>=8){const J=E*p+q*M;for(let ee=0;ee<M;ee++)g[J+ee]=P[(le>>3)+ee]}le+=m,q+=O}z++,E+=d}k*B!=0&&(w+=B*(1+V)),D+=1}return g}(a,r)),a}function s(r,a){return e(new Uint8Array(r.buffer,2,r.length-6),a)}var e=function(){const r={H:{}};return r.H.N=function(a,o){const u=Uint8Array;let b,A,$=0,y=0,P=0,_=0,U=0,F=0,m=0,M=0,p=0;if(a[0]==3&&a[1]==0)return o||new u(0);const g=r.H,w=g.b,j=g.e,S=g.R,I=g.n,C=g.A,D=g.Z,h=g.m,d=o==null;for(d&&(o=new u(a.length>>>2<<5));$==0;)if($=w(a,p,1),y=w(a,p+1,2),p+=3,y!=0){if(d&&(o=r.H.W(o,M+(1<<17))),y==1&&(b=h.J,A=h.h,F=511,m=31),y==2){P=j(a,p,5)+257,_=j(a,p+5,5)+1,U=j(a,p+10,4)+4,p+=14;let k=1;for(var O=0;O<38;O+=2)h.Q[O]=0,h.Q[O+1]=0;for(O=0;O<U;O++){const W=j(a,p+3*O,3);h.Q[1+(h.X[O]<<1)]=W,W>k&&(k=W)}p+=3*U,I(h.Q,k),C(h.Q,k,h.u),b=h.w,A=h.d,p=S(h.u,(1<<k)-1,P+_,a,p,h.v);const B=g.V(h.v,0,P,h.C);F=(1<<B)-1;const Q=g.V(h.v,P,_,h.D);m=(1<<Q)-1,I(h.C,B),C(h.C,B,b),I(h.D,Q),C(h.D,Q,A)}for(;;){const k=b[D(a,p)&F];p+=15&k;const B=k>>>4;if(!(B>>>8))o[M++]=B;else{if(B==256)break;{let Q=M+B-254;if(B>264){const q=h.q[B-257];Q=M+(q>>>3)+j(a,p,7&q),p+=7&q}const W=A[D(a,p)&m];p+=15&W;const V=W>>>4,z=h.c[V],E=(z>>>4)+w(a,p,15&z);for(p+=15&z;M<Q;)o[M]=o[M++-E],o[M]=o[M++-E],o[M]=o[M++-E],o[M]=o[M++-E];M=Q}}}}else{7&p&&(p+=8-(7&p));const k=4+(p>>>3),B=a[k-4]|a[k-3]<<8;d&&(o=r.H.W(o,M+B)),o.set(new u(a.buffer,a.byteOffset+k,B),M),p=k+B<<3,M+=B}return o.length==M?o:o.slice(0,M)},r.H.W=function(a,o){const u=a.length;if(o<=u)return a;const b=new Uint8Array(u<<1);return b.set(a,0),b},r.H.R=function(a,o,u,b,A,$){const y=r.H.e,P=r.H.Z;let _=0;for(;_<u;){const U=a[P(b,A)&o];A+=15&U;const F=U>>>4;if(F<=15)$[_]=F,_++;else{let m=0,M=0;F==16?(M=3+y(b,A,2),A+=2,m=$[_-1]):F==17?(M=3+y(b,A,3),A+=3):F==18&&(M=11+y(b,A,7),A+=7);const p=_+M;for(;_<p;)$[_]=m,_++}}return A},r.H.V=function(a,o,u,b){let A=0,$=0;const y=b.length>>>1;for(;$<u;){const P=a[$+o];b[$<<1]=0,b[1+($<<1)]=P,P>A&&(A=P),$++}for(;$<y;)b[$<<1]=0,b[1+($<<1)]=0,$++;return A},r.H.n=function(a,o){const u=r.H.m,b=a.length;let A,$,y,P;const _=u.j;for(var U=0;U<=o;U++)_[U]=0;for(U=1;U<b;U+=2)_[a[U]]++;const F=u.K;for(A=0,_[0]=0,$=1;$<=o;$++)A=A+_[$-1]<<1,F[$]=A;for(y=0;y<b;y+=2)P=a[y+1],P!=0&&(a[y]=F[P],F[P]++)},r.H.A=function(a,o,u){const b=a.length,A=r.H.m.r;for(let $=0;$<b;$+=2)if(a[$+1]!=0){const y=$>>1,P=a[$+1],_=y<<4|P,U=o-P;let F=a[$]<<U;const m=F+(1<<U);for(;F!=m;)u[A[F]>>>15-o]=_,F++}},r.H.l=function(a,o){const u=r.H.m.r,b=15-o;for(let A=0;A<a.length;A+=2){const $=a[A]<<o-a[A+1];a[A]=u[$]>>>b}},r.H.M=function(a,o,u){u<<=7&o;const b=o>>>3;a[b]|=u,a[b+1]|=u>>>8},r.H.I=function(a,o,u){u<<=7&o;const b=o>>>3;a[b]|=u,a[b+1]|=u>>>8,a[b+2]|=u>>>16},r.H.e=function(a,o,u){return(a[o>>>3]|a[1+(o>>>3)]<<8)>>>(7&o)&(1<<u)-1},r.H.b=function(a,o,u){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)&(1<<u)-1},r.H.Z=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)},r.H.i=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16|a[3+(o>>>3)]<<24)>>>(7&o)},r.H.m=function(){const a=Uint16Array,o=Uint32Array;return{K:new a(16),j:new a(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new a(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new o(32),J:new a(512),_:[],h:new a(32),$:[],w:new a(32768),C:[],v:[],d:new a(32768),D:[],u:new a(512),Q:[],r:new a(32768),s:new o(286),Y:new o(30),a:new o(19),t:new o(15e3),k:new a(65536),g:new a(32768)}}(),function(){const a=r.H.m;for(var o=0;o<32768;o++){let b=o;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,a.r[o]=(b>>>16|b<<16)>>>17}function u(b,A,$){for(;A--!=0;)b.push(0,$)}for(o=0;o<32;o++)a.q[o]=a.S[o]<<3|a.T[o],a.c[o]=a.p[o]<<4|a.z[o];u(a._,144,8),u(a._,112,9),u(a._,24,7),u(a._,8,8),r.H.n(a._,9),r.H.A(a._,9,a.J),r.H.l(a._,9),u(a.$,32,5),r.H.n(a.$,5),r.H.A(a.$,5,a.h),r.H.l(a.$,5),u(a.Q,19,0),u(a.C,286,0),u(a.D,30,0),u(a.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function i(r,a,o,u,b){let A=t(a);const $=Math.ceil(u*A/8);let y,P;A=Math.ceil(A/8);let _=r[o],U=0;if(_>1&&(r[o]=[0,0,1][_-2]),_==3)for(U=A;U<$;U++)r[U+1]=r[U+1]+(r[U+1-A]>>>1)&255;for(let F=0;F<b;F++)if(y=o+F*$,P=y+F+1,_=r[P-1],U=0,_==0)for(;U<$;U++)r[y+U]=r[P+U];else if(_==1){for(;U<A;U++)r[y+U]=r[P+U];for(;U<$;U++)r[y+U]=r[P+U]+r[y+U-A]}else if(_==2)for(;U<$;U++)r[y+U]=r[P+U]+r[y+U-$];else if(_==3){for(;U<A;U++)r[y+U]=r[P+U]+(r[y+U-$]>>>1);for(;U<$;U++)r[y+U]=r[P+U]+(r[y+U-$]+r[y+U-A]>>>1)}else{for(;U<A;U++)r[y+U]=r[P+U]+l(0,r[y+U-$],0);for(;U<$;U++)r[y+U]=r[P+U]+l(r[y+U-A],r[y+U-$],r[y+U-A-$])}return r}function l(r,a,o){const u=r+a-o,b=u-r,A=u-a,$=u-o;return b*b<=A*A&&b*b<=$*$?r:A*A<=$*$?a:o}function v(r,a,o){o.width=n.readUint(r,a),a+=4,o.height=n.readUint(r,a),a+=4,o.depth=r[a],a++,o.ctype=r[a],a++,o.compress=r[a],a++,o.filter=r[a],a++,o.interlace=r[a],a++}function x(r,a,o,u,b,A,$,y,P){const _=Math.min(a,b),U=Math.min(o,A);let F=0,m=0;for(let D=0;D<U;D++)for(let h=0;h<_;h++)if($>=0&&y>=0?(F=D*a+h<<2,m=(y+D)*b+$+h<<2):(F=(-y+D)*a-$+h<<2,m=D*b+h<<2),P==0)u[m]=r[F],u[m+1]=r[F+1],u[m+2]=r[F+2],u[m+3]=r[F+3];else if(P==1){var M=r[F+3]*.00392156862745098,p=r[F]*M,g=r[F+1]*M,w=r[F+2]*M,j=u[m+3]*(1/255),S=u[m]*j,I=u[m+1]*j,C=u[m+2]*j;const d=1-M,O=M+j*d,k=O==0?0:1/O;u[m+3]=255*O,u[m+0]=(p+S*d)*k,u[m+1]=(g+I*d)*k,u[m+2]=(w+C*d)*k}else if(P==2)M=r[F+3],p=r[F],g=r[F+1],w=r[F+2],j=u[m+3],S=u[m],I=u[m+1],C=u[m+2],M==j&&p==S&&g==I&&w==C?(u[m]=0,u[m+1]=0,u[m+2]=0,u[m+3]=0):(u[m]=p,u[m+1]=g,u[m+2]=w,u[m+3]=M);else if(P==3){if(M=r[F+3],p=r[F],g=r[F+1],w=r[F+2],j=u[m+3],S=u[m],I=u[m+1],C=u[m+2],M==j&&p==S&&g==I&&w==C)continue;if(M<220&&j>20)return!1}return!0}return{decode:function(a){const o=new Uint8Array(a);let u=8;const b=n,A=b.readUshort,$=b.readUint,y={tabs:{},frames:[]},P=new Uint8Array(o.length);let _,U=0,F=0;const m=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(o[M]!=m[M])throw"The input is not a PNG file!";for(;u<o.length;){const D=b.readUint(o,u);u+=4;const h=b.readASCII(o,u,4);if(u+=4,h=="IHDR")v(o,u,y);else if(h=="iCCP"){for(var p=u;o[p]!=0;)p++;b.readASCII(o,u,p-u),o[p+1];const d=o.slice(p+2,u+D);let O=null;try{O=s(d)}catch{O=e(d)}y.tabs[h]=O}else if(h=="CgBI")y.tabs[h]=o.slice(u,u+4);else if(h=="IDAT"){for(M=0;M<D;M++)P[U+M]=o[u+M];U+=D}else if(h=="acTL")y.tabs[h]={num_frames:$(o,u),num_plays:$(o,u+4)},_=new Uint8Array(o.length);else if(h=="fcTL"){F!=0&&((C=y.frames[y.frames.length-1]).data=T(y,_.slice(0,F),C.rect.width,C.rect.height),F=0);const d={x:$(o,u+12),y:$(o,u+16),width:$(o,u+4),height:$(o,u+8)};let O=A(o,u+22);O=A(o,u+20)/(O==0?100:O);const k={rect:d,delay:Math.round(1e3*O),dispose:o[u+24],blend:o[u+25]};y.frames.push(k)}else if(h=="fdAT"){for(M=0;M<D-4;M++)_[F+M]=o[u+M+4];F+=D-4}else if(h=="pHYs")y.tabs[h]=[b.readUint(o,u),b.readUint(o,u+4),o[u+8]];else if(h=="cHRM")for(y.tabs[h]=[],M=0;M<8;M++)y.tabs[h].push(b.readUint(o,u+4*M));else if(h=="tEXt"||h=="zTXt"){y.tabs[h]==null&&(y.tabs[h]={});var g=b.nextZero(o,u),w=b.readASCII(o,u,g-u),j=u+D-g-1;if(h=="tEXt")I=b.readASCII(o,g+1,j);else{var S=s(o.slice(g+2,g+2+j));I=b.readUTF8(S,0,S.length)}y.tabs[h][w]=I}else if(h=="iTXt"){y.tabs[h]==null&&(y.tabs[h]={}),g=0,p=u,g=b.nextZero(o,p),w=b.readASCII(o,p,g-p);const d=o[p=g+1];var I;o[p+1],p+=2,g=b.nextZero(o,p),b.readASCII(o,p,g-p),p=g+1,g=b.nextZero(o,p),b.readUTF8(o,p,g-p),j=D-((p=g+1)-u),d==0?I=b.readUTF8(o,p,j):(S=s(o.slice(p,p+j)),I=b.readUTF8(S,0,S.length)),y.tabs[h][w]=I}else if(h=="PLTE")y.tabs[h]=b.readBytes(o,u,D);else if(h=="hIST"){const d=y.tabs.PLTE.length/3;for(y.tabs[h]=[],M=0;M<d;M++)y.tabs[h].push(A(o,u+2*M))}else if(h=="tRNS")y.ctype==3?y.tabs[h]=b.readBytes(o,u,D):y.ctype==0?y.tabs[h]=A(o,u):y.ctype==2&&(y.tabs[h]=[A(o,u),A(o,u+2),A(o,u+4)]);else if(h=="gAMA")y.tabs[h]=b.readUint(o,u)/1e5;else if(h=="sRGB")y.tabs[h]=o[u];else if(h=="bKGD")y.ctype==0||y.ctype==4?y.tabs[h]=[A(o,u)]:y.ctype==2||y.ctype==6?y.tabs[h]=[A(o,u),A(o,u+2),A(o,u+4)]:y.ctype==3&&(y.tabs[h]=o[u]);else if(h=="IEND")break;u+=D,b.readUint(o,u),u+=4}var C;return F!=0&&((C=y.frames[y.frames.length-1]).data=T(y,_.slice(0,F),C.rect.width,C.rect.height)),y.data=T(y,P,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(a){const o=a.width,u=a.height;if(a.tabs.acTL==null)return[c(a.data,o,u,a).buffer];const b=[];a.frames[0].data==null&&(a.frames[0].data=a.data);const A=o*u*4,$=new Uint8Array(A),y=new Uint8Array(A),P=new Uint8Array(A);for(let U=0;U<a.frames.length;U++){const F=a.frames[U],m=F.rect.x,M=F.rect.y,p=F.rect.width,g=F.rect.height,w=c(F.data,p,g,a);if(U!=0)for(var _=0;_<A;_++)P[_]=$[_];if(F.blend==0?x(w,p,g,$,o,u,m,M,0):F.blend==1&&x(w,p,g,$,o,u,m,M,1),b.push($.buffer.slice(0)),F.dispose!=0){if(F.dispose==1)x(y,p,g,$,o,u,m,M,0);else if(F.dispose==2)for(_=0;_<A;_++)$[_]=P[_]}}return b},_paeth:l,_copyTile:x,_bin:n}}();(function(){const{_copyTile:n}=Ve,{_bin:c}=Ve,T=Ve._paeth;var s={table:function(){const p=new Uint32Array(256);for(let g=0;g<256;g++){let w=g;for(let j=0;j<8;j++)1&w?w=3988292384^w>>>1:w>>>=1;p[g]=w}return p}(),update(p,g,w,j){for(let S=0;S<j;S++)p=s.table[255&(p^g[w+S])]^p>>>8;return p},crc:(p,g,w)=>4294967295^s.update(4294967295,p,g,w)};function e(p,g,w,j){g[w]+=p[0]*j>>4,g[w+1]+=p[1]*j>>4,g[w+2]+=p[2]*j>>4,g[w+3]+=p[3]*j>>4}function t(p){return Math.max(0,Math.min(255,p))}function i(p,g){const w=p[0]-g[0],j=p[1]-g[1],S=p[2]-g[2],I=p[3]-g[3];return w*w+j*j+S*S+I*I}function l(p,g,w,j,S,I,C){C==null&&(C=1);const D=j.length,h=[];for(var d=0;d<D;d++){const E=j[d];h.push([E>>>0&255,E>>>8&255,E>>>16&255,E>>>24&255])}for(d=0;d<D;d++){let E=4294967295;for(var O=0,k=0;k<D;k++){var B=i(h[d],h[k]);k!=d&&B<E&&(E=B,O=k)}}const Q=new Uint32Array(S.buffer),W=new Int16Array(g*w*4),V=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<V.length;d++)V[d]=255*((V[d]+.5)/16-.5);for(let E=0;E<w;E++)for(let q=0;q<g;q++){var z;d=4*(E*g+q),C!=2?z=[t(p[d]+W[d]),t(p[d+1]+W[d+1]),t(p[d+2]+W[d+2]),t(p[d+3]+W[d+3])]:(B=V[4*(3&E)+(3&q)],z=[t(p[d]+B),t(p[d+1]+B),t(p[d+2]+B),t(p[d+3]+B)]),O=0;let le=16777215;for(k=0;k<D;k++){const re=i(z,h[k]);re<le&&(le=re,O=k)}const J=h[O],ee=[z[0]-J[0],z[1]-J[1],z[2]-J[2],z[3]-J[3]];C==1&&(q!=g-1&&e(ee,W,d+4,7),E!=w-1&&(q!=0&&e(ee,W,d+4*g-4,3),e(ee,W,d+4*g,5),q!=g-1&&e(ee,W,d+4*g+4,1))),I[d>>2]=O,Q[d>>2]=j[O]}}function v(p,g,w,j,S){S==null&&(S={});const{crc:I}=s,C=c.writeUint,D=c.writeUshort,h=c.writeASCII;let d=8;const O=p.frames.length>1;let k,B=!1,Q=33+(O?20:0);if(S.sRGB!=null&&(Q+=13),S.pHYs!=null&&(Q+=21),S.iCCP!=null&&(k=pako.deflate(S.iCCP),Q+=21+k.length+4),p.ctype==3){for(var W=p.plte.length,V=0;V<W;V++)p.plte[V]>>>24!=255&&(B=!0);Q+=8+3*W+4+(B?8+1*W+4:0)}for(var z=0;z<p.frames.length;z++)O&&(Q+=38),Q+=(J=p.frames[z]).cimg.length+12,z!=0&&(Q+=4);Q+=12;const E=new Uint8Array(Q),q=[137,80,78,71,13,10,26,10];for(V=0;V<8;V++)E[V]=q[V];if(C(E,d,13),d+=4,h(E,d,"IHDR"),d+=4,C(E,d,g),d+=4,C(E,d,w),d+=4,E[d]=p.depth,d++,E[d]=p.ctype,d++,E[d]=0,d++,E[d]=0,d++,E[d]=0,d++,C(E,d,I(E,d-17,17)),d+=4,S.sRGB!=null&&(C(E,d,1),d+=4,h(E,d,"sRGB"),d+=4,E[d]=S.sRGB,d++,C(E,d,I(E,d-5,5)),d+=4),S.iCCP!=null){const ee=13+k.length;C(E,d,ee),d+=4,h(E,d,"iCCP"),d+=4,h(E,d,"ICC profile"),d+=11,d+=2,E.set(k,d),d+=k.length,C(E,d,I(E,d-(ee+4),ee+4)),d+=4}if(S.pHYs!=null&&(C(E,d,9),d+=4,h(E,d,"pHYs"),d+=4,C(E,d,S.pHYs[0]),d+=4,C(E,d,S.pHYs[1]),d+=4,E[d]=S.pHYs[2],d++,C(E,d,I(E,d-13,13)),d+=4),O&&(C(E,d,8),d+=4,h(E,d,"acTL"),d+=4,C(E,d,p.frames.length),d+=4,C(E,d,S.loop!=null?S.loop:0),d+=4,C(E,d,I(E,d-12,12)),d+=4),p.ctype==3){for(C(E,d,3*(W=p.plte.length)),d+=4,h(E,d,"PLTE"),d+=4,V=0;V<W;V++){const ee=3*V,re=p.plte[V],he=255&re,oe=re>>>8&255,Ge=re>>>16&255;E[d+ee+0]=he,E[d+ee+1]=oe,E[d+ee+2]=Ge}if(d+=3*W,C(E,d,I(E,d-3*W-4,3*W+4)),d+=4,B){for(C(E,d,W),d+=4,h(E,d,"tRNS"),d+=4,V=0;V<W;V++)E[d+V]=p.plte[V]>>>24&255;d+=W,C(E,d,I(E,d-W-4,W+4)),d+=4}}let le=0;for(z=0;z<p.frames.length;z++){var J=p.frames[z];O&&(C(E,d,26),d+=4,h(E,d,"fcTL"),d+=4,C(E,d,le++),d+=4,C(E,d,J.rect.width),d+=4,C(E,d,J.rect.height),d+=4,C(E,d,J.rect.x),d+=4,C(E,d,J.rect.y),d+=4,D(E,d,j[z]),d+=2,D(E,d,1e3),d+=2,E[d]=J.dispose,d++,E[d]=J.blend,d++,C(E,d,I(E,d-30,30)),d+=4);const ee=J.cimg;C(E,d,(W=ee.length)+(z==0?0:4)),d+=4;const re=d;h(E,d,z==0?"IDAT":"fdAT"),d+=4,z!=0&&(C(E,d,le++),d+=4),E.set(ee,d),d+=W,C(E,d,I(E,re,d-re)),d+=4}return C(E,d,0),d+=4,h(E,d,"IEND"),d+=4,C(E,d,I(E,d-4,4)),d+=4,E.buffer}function x(p,g,w){for(let j=0;j<p.frames.length;j++){const S=p.frames[j];S.rect.width;const I=S.rect.height,C=new Uint8Array(I*S.bpl+I);S.cimg=u(S.img,I,S.bpp,S.bpl,C,g,w)}}function r(p,g,w,j,S){const I=S[0],C=S[1],D=S[2],h=S[3],d=S[4],O=S[5];let k=6,B=8,Q=255;for(var W=0;W<p.length;W++){const ue=new Uint8Array(p[W]);for(var V=ue.length,z=0;z<V;z+=4)Q&=ue[z+3]}const E=Q!=255,q=function(ae,X,ge,ye,pe,Se){const fe=[];for(var se=0;se<ae.length;se++){const xe=new Uint8Array(ae[se]),Re=new Uint32Array(xe.buffer);var Ce;let Ae=0,We=0,Pe=X,Xe=ge,At=ye?1:0;if(se!=0){const yt=Se||ye||se==1||fe[se-2].dispose!=0?1:2;let st=0,It=1e9;for(let Je=0;Je<yt;Je++){var Fe=new Uint8Array(ae[se-1-Je]);const Nt=new Uint32Array(ae[se-1-Je]);let qe=X,Ye=ge,it=-1,pt=-1;for(let et=0;et<ge;et++)for(let tt=0;tt<X;tt++)Re[me=et*X+tt]!=Nt[me]&&(tt<qe&&(qe=tt),tt>it&&(it=tt),et<Ye&&(Ye=et),et>pt&&(pt=et));it==-1&&(qe=Ye=it=pt=0),pe&&((1&qe)==1&&qe--,(1&Ye)==1&&Ye--);const $t=(it-qe+1)*(pt-Ye+1);$t<It&&(It=$t,st=Je,Ae=qe,We=Ye,Pe=it-qe+1,Xe=pt-Ye+1)}Fe=new Uint8Array(ae[se-1-st]),st==1&&(fe[se-1].dispose=2),Ce=new Uint8Array(Pe*Xe*4),n(Fe,X,ge,Ce,Pe,Xe,-Ae,-We,0),At=n(xe,X,ge,Ce,Pe,Xe,-Ae,-We,3)?1:0,At==1?o(xe,X,ge,Ce,{x:Ae,y:We,width:Pe,height:Xe}):n(xe,X,ge,Ce,Pe,Xe,-Ae,-We,0)}else Ce=xe.slice(0);fe.push({rect:{x:Ae,y:We,width:Pe,height:Xe},img:Ce,blend:At,dispose:0})}if(ye)for(se=0;se<fe.length;se++){if((Qe=fe[se]).blend==1)continue;const xe=Qe.rect,Re=fe[se-1].rect,Ae=Math.min(xe.x,Re.x),We=Math.min(xe.y,Re.y),Pe={x:Ae,y:We,width:Math.max(xe.x+xe.width,Re.x+Re.width)-Ae,height:Math.max(xe.y+xe.height,Re.y+Re.height)-We};fe[se-1].dispose=1,se-1!=0&&a(ae,X,ge,fe,se-1,Pe,pe),a(ae,X,ge,fe,se,Pe,pe)}let xt=0;if(ae.length!=1)for(var me=0;me<fe.length;me++){var Qe;xt+=(Qe=fe[me]).rect.width*Qe.rect.height}return fe}(p,g,w,I,C,D),le={},J=[],ee=[];if(j!=0){const ue=[];for(z=0;z<q.length;z++)ue.push(q[z].img.buffer);const ae=function(pe){let Se=0;for(var fe=0;fe<pe.length;fe++)Se+=pe[fe].byteLength;const se=new Uint8Array(Se);let Ce=0;for(fe=0;fe<pe.length;fe++){const Fe=new Uint8Array(pe[fe]),xt=Fe.length;for(let me=0;me<xt;me+=4){let Qe=Fe[me],xe=Fe[me+1],Re=Fe[me+2];const Ae=Fe[me+3];Ae==0&&(Qe=xe=Re=0),se[Ce+me]=Qe,se[Ce+me+1]=xe,se[Ce+me+2]=Re,se[Ce+me+3]=Ae}Ce+=xt}return se.buffer}(ue),X=A(ae,j);for(z=0;z<X.plte.length;z++)J.push(X.plte[z].est.rgba);let ge=0;for(z=0;z<q.length;z++){const ye=(he=q[z]).img.length;var re=new Uint8Array(X.inds.buffer,ge>>2,ye>>2);ee.push(re);const pe=new Uint8Array(X.abuf,ge,ye);O&&l(he.img,he.rect.width,he.rect.height,J,pe,re),he.img.set(pe),ge+=ye}}else for(W=0;W<q.length;W++){var he=q[W];const ue=new Uint32Array(he.img.buffer);var oe=he.rect.width;for(V=ue.length,re=new Uint8Array(V),ee.push(re),z=0;z<V;z++){const ae=ue[z];if(z!=0&&ae==ue[z-1])re[z]=re[z-1];else if(z>oe&&ae==ue[z-oe])re[z]=re[z-oe];else{let X=le[ae];if(X==null&&(le[ae]=X=J.length,J.push(ae),J.length>=300))break;re[z]=X}}}const Ge=J.length;for(Ge<=256&&d==0&&(B=Ge<=2?1:Ge<=4?2:Ge<=16?4:8,B=Math.max(B,h)),W=0;W<q.length;W++){(he=q[W]).rect.x,he.rect.y,oe=he.rect.width;const ue=he.rect.height;let ae=he.img;new Uint32Array(ae.buffer);let X=4*oe,ge=4;if(Ge<=256&&d==0){X=Math.ceil(B*oe/8);var ve=new Uint8Array(X*ue);const ye=ee[W];for(let pe=0;pe<ue;pe++){z=pe*X;const Se=pe*oe;if(B==8)for(var de=0;de<oe;de++)ve[z+de]=ye[Se+de];else if(B==4)for(de=0;de<oe;de++)ve[z+(de>>1)]|=ye[Se+de]<<4-4*(1&de);else if(B==2)for(de=0;de<oe;de++)ve[z+(de>>2)]|=ye[Se+de]<<6-2*(3&de);else if(B==1)for(de=0;de<oe;de++)ve[z+(de>>3)]|=ye[Se+de]<<7-1*(7&de)}ae=ve,k=3,ge=1}else if(E==0&&q.length==1){ve=new Uint8Array(oe*ue*3);const ye=oe*ue;for(z=0;z<ye;z++){const pe=3*z,Se=4*z;ve[pe]=ae[Se],ve[pe+1]=ae[Se+1],ve[pe+2]=ae[Se+2]}ae=ve,k=2,ge=3,X=3*oe}he.img=ae,he.bpl=X,he.bpp=ge}return{ctype:k,depth:B,plte:J,frames:q}}function a(p,g,w,j,S,I,C){const D=Uint8Array,h=Uint32Array,d=new D(p[S-1]),O=new h(p[S-1]),k=S+1<p.length?new D(p[S+1]):null,B=new D(p[S]),Q=new h(B.buffer);let W=g,V=w,z=-1,E=-1;for(let le=0;le<I.height;le++)for(let J=0;J<I.width;J++){const ee=I.x+J,re=I.y+le,he=re*g+ee,oe=Q[he];oe==0||j[S-1].dispose==0&&O[he]==oe&&(k==null||k[4*he+3]!=0)||(ee<W&&(W=ee),ee>z&&(z=ee),re<V&&(V=re),re>E&&(E=re))}z==-1&&(W=V=z=E=0),C&&((1&W)==1&&W--,(1&V)==1&&V--),I={x:W,y:V,width:z-W+1,height:E-V+1};const q=j[S];q.rect=I,q.blend=1,q.img=new Uint8Array(I.width*I.height*4),j[S-1].dispose==0?(n(d,g,w,q.img,I.width,I.height,-I.x,-I.y,0),o(B,g,w,q.img,I)):n(B,g,w,q.img,I.width,I.height,-I.x,-I.y,0)}function o(p,g,w,j,S){n(p,g,w,j,S.width,S.height,-S.x,-S.y,2)}function u(p,g,w,j,S,I,C){const D=[];let h,d=[0,1,2,3,4];I!=-1?d=[I]:(g*j>5e5||w==1)&&(d=[0]),C&&(h={level:0});const O=Zo;for(var k=0;k<d.length;k++){for(let W=0;W<g;W++)b(S,p,W,j,w,d[k]);D.push(O.deflate(S,h))}let B,Q=1e9;for(k=0;k<D.length;k++)D[k].length<Q&&(B=k,Q=D[k].length);return D[B]}function b(p,g,w,j,S,I){const C=w*j;let D=C+w;if(p[D]=I,D++,I==0)if(j<500)for(var h=0;h<j;h++)p[D+h]=g[C+h];else p.set(new Uint8Array(g.buffer,C,j),D);else if(I==1){for(h=0;h<S;h++)p[D+h]=g[C+h];for(h=S;h<j;h++)p[D+h]=g[C+h]-g[C+h-S]+256&255}else if(w==0){for(h=0;h<S;h++)p[D+h]=g[C+h];if(I==2)for(h=S;h<j;h++)p[D+h]=g[C+h];if(I==3)for(h=S;h<j;h++)p[D+h]=g[C+h]-(g[C+h-S]>>1)+256&255;if(I==4)for(h=S;h<j;h++)p[D+h]=g[C+h]-T(g[C+h-S],0,0)+256&255}else{if(I==2)for(h=0;h<j;h++)p[D+h]=g[C+h]+256-g[C+h-j]&255;if(I==3){for(h=0;h<S;h++)p[D+h]=g[C+h]+256-(g[C+h-j]>>1)&255;for(h=S;h<j;h++)p[D+h]=g[C+h]+256-(g[C+h-j]+g[C+h-S]>>1)&255}if(I==4){for(h=0;h<S;h++)p[D+h]=g[C+h]+256-T(0,g[C+h-j],0)&255;for(h=S;h<j;h++)p[D+h]=g[C+h]+256-T(g[C+h-S],g[C+h-j],g[C+h-S-j])&255}}}function A(p,g){const w=new Uint8Array(p),j=w.slice(0),S=new Uint32Array(j.buffer),I=$(j,g),C=I[0],D=I[1],h=w.length,d=new Uint8Array(h>>2);let O;if(w.length<2e7)for(var k=0;k<h;k+=4)O=y(C,B=w[k]*(1/255),Q=w[k+1]*(1/255),W=w[k+2]*(1/255),V=w[k+3]*(1/255)),d[k>>2]=O.ind,S[k>>2]=O.est.rgba;else for(k=0;k<h;k+=4){var B=w[k]*.00392156862745098,Q=w[k+1]*(1/255),W=w[k+2]*(1/255),V=w[k+3]*(1/255);for(O=C;O.left;)O=P(O.est,B,Q,W,V)<=0?O.left:O.right;d[k>>2]=O.ind,S[k>>2]=O.est.rgba}return{abuf:j.buffer,inds:d,plte:D}}function $(p,g,w){w==null&&(w=1e-4);const j=new Uint32Array(p.buffer),S={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};S.bst=F(p,S.i0,S.i1),S.est=m(S.bst);const I=[S];for(;I.length<g;){let D=0,h=0;for(var C=0;C<I.length;C++)I[C].est.L>D&&(D=I[C].est.L,h=C);if(D<w)break;const d=I[h],O=_(p,j,d.i0,d.i1,d.est.e,d.est.eMq255);if(d.i0>=O||d.i1<=O){d.est.L=0;continue}const k={i0:d.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};k.bst=F(p,k.i0,k.i1),k.est=m(k.bst);const B={i0:O,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};for(B.bst={R:[],m:[],N:d.bst.N-k.bst.N},C=0;C<16;C++)B.bst.R[C]=d.bst.R[C]-k.bst.R[C];for(C=0;C<4;C++)B.bst.m[C]=d.bst.m[C]-k.bst.m[C];B.est=m(B.bst),d.left=k,d.right=B,I[h]=k,I.push(B)}for(I.sort((D,h)=>h.bst.N-D.bst.N),C=0;C<I.length;C++)I[C].ind=C;return[S,I]}function y(p,g,w,j,S){if(p.left==null)return p.tdst=function(k,B,Q,W,V){const z=B-k[0],E=Q-k[1],q=W-k[2],le=V-k[3];return z*z+E*E+q*q+le*le}(p.est.q,g,w,j,S),p;const I=P(p.est,g,w,j,S);let C=p.left,D=p.right;I>0&&(C=p.right,D=p.left);const h=y(C,g,w,j,S);if(h.tdst<=I*I)return h;const d=y(D,g,w,j,S);return d.tdst<h.tdst?d:h}function P(p,g,w,j,S){const{e:I}=p;return I[0]*g+I[1]*w+I[2]*j+I[3]*S-p.eMq}function _(p,g,w,j,S,I){for(j-=4;w<j;){for(;U(p,w,S)<=I;)w+=4;for(;U(p,j,S)>I;)j-=4;if(w>=j)break;const C=g[w>>2];g[w>>2]=g[j>>2],g[j>>2]=C,w+=4,j-=4}for(;U(p,w,S)>I;)w-=4;return w+4}function U(p,g,w){return p[g]*w[0]+p[g+1]*w[1]+p[g+2]*w[2]+p[g+3]*w[3]}function F(p,g,w){const j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=[0,0,0,0],I=w-g>>2;for(let C=g;C<w;C+=4){const D=p[C]*.00392156862745098,h=p[C+1]*(1/255),d=p[C+2]*(1/255),O=p[C+3]*(1/255);S[0]+=D,S[1]+=h,S[2]+=d,S[3]+=O,j[0]+=D*D,j[1]+=D*h,j[2]+=D*d,j[3]+=D*O,j[5]+=h*h,j[6]+=h*d,j[7]+=h*O,j[10]+=d*d,j[11]+=d*O,j[15]+=O*O}return j[4]=j[1],j[8]=j[2],j[9]=j[6],j[12]=j[3],j[13]=j[7],j[14]=j[11],{R:j,m:S,N:I}}function m(p){const{R:g}=p,{m:w}=p,{N:j}=p,S=w[0],I=w[1],C=w[2],D=w[3],h=j==0?0:1/j,d=[g[0]-S*S*h,g[1]-S*I*h,g[2]-S*C*h,g[3]-S*D*h,g[4]-I*S*h,g[5]-I*I*h,g[6]-I*C*h,g[7]-I*D*h,g[8]-C*S*h,g[9]-C*I*h,g[10]-C*C*h,g[11]-C*D*h,g[12]-D*S*h,g[13]-D*I*h,g[14]-D*C*h,g[15]-D*D*h],O=d,k=M;let B=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,W=0;if(j!=0)for(let z=0;z<16&&(B=k.multVec(O,B),W=Math.sqrt(k.dot(B,B)),B=k.sml(1/W,B),!(z!=0&&Math.abs(W-Q)<1e-9));z++)Q=W;const V=[S*h,I*h,C*h,D*h];return{Cov:d,q:V,e:B,L:Q,eMq255:k.dot(k.sml(255,V),B),eMq:k.dot(B,V),rgba:(Math.round(255*V[3])<<24|Math.round(255*V[2])<<16|Math.round(255*V[1])<<8|Math.round(255*V[0])<<0)>>>0}}var M={multVec:(p,g)=>[p[0]*g[0]+p[1]*g[1]+p[2]*g[2]+p[3]*g[3],p[4]*g[0]+p[5]*g[1]+p[6]*g[2]+p[7]*g[3],p[8]*g[0]+p[9]*g[1]+p[10]*g[2]+p[11]*g[3],p[12]*g[0]+p[13]*g[1]+p[14]*g[2]+p[15]*g[3]],dot:(p,g)=>p[0]*g[0]+p[1]*g[1]+p[2]*g[2]+p[3]*g[3],sml:(p,g)=>[p*g[0],p*g[1],p*g[2],p*g[3]]};Ve.encode=function(g,w,j,S,I,C,D){S==null&&(S=0),D==null&&(D=!1);const h=r(g,w,j,S,[!1,!1,!1,0,D,!1]);return x(h,-1),v(h,w,j,I,C)},Ve.encodeLL=function(g,w,j,S,I,C,D,h){const d={ctype:0+(S==1?0:2)+(I==0?0:4),depth:C,frames:[]},O=(S+I)*C,k=O*w;for(let B=0;B<g.length;B++)d.frames.push({rect:{x:0,y:0,width:w,height:j},img:new Uint8Array(g[B]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(k/8)});return x(d,0,!0),v(d,w,j,D,h)},Ve.encode.compress=r,Ve.encode.dither=l,Ve.quantize=A,Ve.quantize.getKDtree=$,Ve.quantize.getNearest=y})();const $n={toArrayBuffer(n,c){const T=n.width,s=n.height,e=T<<2,t=n.getContext("2d").getImageData(0,0,T,s),i=new Uint32Array(t.data.buffer),l=(32*T+31)/32<<2,v=l*s,x=122+v,r=new ArrayBuffer(x),a=new DataView(r),o=1<<20;let u,b,A,$,y=o,P=0,_=0,U=0;function F(p){a.setUint16(_,p,!0),_+=2}function m(p){a.setUint32(_,p,!0),_+=4}function M(p){_+=p}F(19778),m(x),M(4),m(122),m(108),m(T),m(-s>>>0),F(1),F(32),m(3),m(v),m(2835),m(2835),M(8),m(16711680),m(65280),m(255),m(4278190080),m(1466527264),function p(){for(;P<s&&y>0;){for($=122+P*l,u=0;u<e;)y--,b=i[U++],A=b>>>24,a.setUint32($+u,b<<8|A),u+=4;P++}U<i.length?(y=o,setTimeout(p,$n._dly)):c(r)}()},toBlob(n,c){this.toArrayBuffer(n,T=>{c(new Blob([T],{type:"image/bmp"}))})},_dly:9};var Ue={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Go={[Ue.CHROME]:16384,[Ue.FIREFOX]:11180,[Ue.DESKTOP_SAFARI]:16384,[Ue.IE]:8192,[Ue.IOS]:4096,[Ue.ETC]:8192};const nn=typeof window<"u",Un=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,_t=nn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Xo=(nn||Un)&&(_t&&_t.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Rn=(nn||Un)&&(_t&&_t.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function rn(n,c,T=Date.now()){return new Promise(s=>{const e=n.split(","),t=e[0].match(/:(.*?);/)[1],i=globalThis.atob(e[1]);let l=i.length;const v=new Uint8Array(l);for(;l--;)v[l]=i.charCodeAt(l);const x=new Blob([v],{type:t});x.name=c,x.lastModified=T,s(x)})}function Mn(n){return new Promise((c,T)=>{const s=new Rn;s.onload=()=>c(s.result),s.onerror=e=>T(e),s.readAsDataURL(n)})}function _n(n){return new Promise((c,T)=>{const s=new Image;s.onload=()=>c(s),s.onerror=e=>T(e),s.src=n})}function bt(){if(bt.cachedResult!==void 0)return bt.cachedResult;let n=Ue.ETC;const{userAgent:c}=navigator;return/Chrom(e|ium)/i.test(c)?n=Ue.CHROME:/iP(ad|od|hone)/i.test(c)&&/WebKit/i.test(c)?n=Ue.IOS:/Safari/i.test(c)?n=Ue.DESKTOP_SAFARI:/Firefox/i.test(c)?n=Ue.FIREFOX:(/MSIE/i.test(c)||document.documentMode)&&(n=Ue.IE),bt.cachedResult=n,bt.cachedResult}function Fn(n,c){const T=bt(),s=Go[T];let e=n,t=c,i=e*t;const l=e>t?t/e:e/t;for(;i>s*s;){const v=(s+e)/2,x=(s+t)/2;v<x?(t=x,e=x*l):(t=v*l,e=v),i=e*t}return{width:e,height:t}}function Ot(n,c){let T,s;try{if(T=new OffscreenCanvas(n,c),s=T.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{T=document.createElement("canvas"),s=T.getContext("2d")}return T.width=n,T.height=c,[T,s]}function Pn(n,c){const{width:T,height:s}=Fn(n.width,n.height),[e,t]=Ot(T,s);return c&&/jpe?g/.test(c)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(n,0,0,e.width,e.height),e}function Ut(){return Ut.cachedResult!==void 0||(Ut.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ut.cachedResult}function Ft(n,c={}){return new Promise(function(T,s){let e,t;var i=function(){try{return t=Pn(e,c.fileType||n.type),T([e,t])}catch(v){return s(v)}},l=function(v){try{var x=function(r){try{throw r}catch(a){return s(a)}};try{let r;return Mn(n).then(function(a){try{return r=a,_n(r).then(function(o){try{return e=o,function(){try{return i()}catch(u){return s(u)}}()}catch(u){return x(u)}},x)}catch(o){return x(o)}},x)}catch(r){x(r)}}catch(r){return s(r)}};try{if(Ut()||[Ue.DESKTOP_SAFARI,Ue.MOBILE_SAFARI].includes(bt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(v){try{return e=v,i()}catch{return l()}},l)}catch{l()}})}function Pt(n,c,T,s,e=1){return new Promise(function(t,i){let l;if(c==="image/png"){let x,r,a;return x=n.getContext("2d"),{data:r}=x.getImageData(0,0,n.width,n.height),a=Ve.encode([r.buffer],n.width,n.height,4096*e),l=new Blob([a],{type:c}),l.name=T,l.lastModified=s,v.call(this)}{let x=function(){return v.call(this)};if(c==="image/bmp")return new Promise(r=>$n.toBlob(n,r)).then((function(r){try{return l=r,l.name=T,l.lastModified=s,x.call(this)}catch(a){return i(a)}}).bind(this),i);{let r=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:c,quality:e}).then((function(a){try{return l=a,l.name=T,l.lastModified=s,r.call(this)}catch(o){return i(o)}}).bind(this),i);{let a;return a=n.toDataURL(c,e),rn(a,T,s).then((function(o){try{return l=o,r.call(this)}catch(u){return i(u)}}).bind(this),i)}}}function v(){return t(l)}})}function Ze(n){n.width=0,n.height=0}function jt(){return new Promise(function(n,c){let T,s,e,t;return jt.cachedResult!==void 0?n(jt.cachedResult):rn("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(i){try{return T=i,Ft(T).then(function(l){try{return s=l[1],Pt(s,T.type,T.name,T.lastModified).then(function(v){try{return e=v,Ze(s),Ft(e).then(function(x){try{return t=x[0],jt.cachedResult=t.width===1&&t.height===2,n(jt.cachedResult)}catch(r){return c(r)}},c)}catch(x){return c(x)}},c)}catch(v){return c(v)}},c)}catch(l){return c(l)}},c)})}function En(n){return new Promise((c,T)=>{const s=new Rn;s.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return c(-2);const i=t.byteLength;let l=2;for(;l<i;){if(t.getUint16(l+2,!1)<=8)return c(-1);const v=t.getUint16(l,!1);if(l+=2,v==65505){if(t.getUint32(l+=2,!1)!=1165519206)return c(-1);const x=t.getUint16(l+=6,!1)==18761;l+=t.getUint32(l+4,x);const r=t.getUint16(l,x);l+=2;for(let a=0;a<r;a++)if(t.getUint16(l+12*a,x)==274)return c(t.getUint16(l+12*a+8,x))}else{if((65280&v)!=65280)break;l+=t.getUint16(l,!1)}}return c(-1)},s.onerror=e=>T(e),s.readAsArrayBuffer(n)})}function On(n,c){const{width:T}=n,{height:s}=n,{maxWidthOrHeight:e}=c;let t,i=n;return isFinite(e)&&(T>e||s>e)&&([i,t]=Ot(T,s),T>s?(i.width=e,i.height=s/T*e):(i.width=T/s*e,i.height=e),t.drawImage(n,0,0,i.width,i.height),Ze(n)),i}function Nn(n,c){const{width:T}=n,{height:s}=n,[e,t]=Ot(T,s);switch(c>4&&c<9?(e.width=s,e.height=T):(e.width=T,e.height=s),c){case 2:t.transform(-1,0,0,1,T,0);break;case 3:t.transform(-1,0,0,-1,T,s);break;case 4:t.transform(1,0,0,-1,0,s);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,s,0);break;case 7:t.transform(0,-1,-1,0,s,T);break;case 8:t.transform(0,-1,1,0,0,T)}return t.drawImage(n,0,0,T,s),Ze(n),e}function wn(n,c,T=0){return new Promise(function(s,e){let t,i,l,v,x,r,a,o,u,b,A,$,y,P,_,U,F,m,M,p;function g(j=5){if(c.signal&&c.signal.aborted)throw c.signal.reason;t+=j,c.onProgress(Math.min(t,100))}function w(j){if(c.signal&&c.signal.aborted)throw c.signal.reason;t=Math.min(Math.max(j,t),100),c.onProgress(t)}return t=T,i=c.maxIteration||10,l=1024*c.maxSizeMB*1024,g(),Ft(n,c).then((function(j){try{return[,v]=j,g(),x=On(v,c),g(),new Promise(function(S,I){var C;if(!(C=c.exifOrientation))return En(n).then((function(h){try{return C=h,D.call(this)}catch(d){return I(d)}}).bind(this),I);function D(){return S(C)}return D.call(this)}).then((function(S){try{return r=S,g(),jt().then((function(I){try{return a=I?x:Nn(x,r),g(),o=c.initialQuality||1,u=c.fileType||n.type,Pt(a,u,n.name,n.lastModified,o).then((function(C){try{{let h=function(){if(i--&&(_>l||_>y)){let O,k;return O=p?.95*M.width:M.width,k=p?.95*M.height:M.height,[F,m]=Ot(O,k),m.drawImage(M,0,0,O,k),o*=u==="image/png"?.85:.95,Pt(F,u,n.name,n.lastModified,o).then(function(B){try{return U=B,Ze(M),M=F,_=U.size,w(Math.min(99,Math.floor((P-_)/(P-l)*100))),h}catch(Q){return e(Q)}},e)}return[1]},d=function(){return Ze(M),Ze(F),Ze(x),Ze(a),Ze(v),w(100),s(U)};if(b=C,g(),A=b.size>l,$=b.size>n.size,!A&&!$)return w(100),s(b);var D;return y=n.size,P=b.size,_=P,M=a,p=!c.alwaysKeepResolution&&A,(D=(function(O){for(;O;){if(O.then)return void O.then(D,e);try{if(O.pop){if(O.length)return O.pop()?d.call(this):O;O=h}else O=O.call(this)}catch(k){return e(k)}}}).bind(this))(h)}}catch(h){return e(h)}}).bind(this),e)}catch(C){return e(C)}}).bind(this),e)}catch(I){return e(I)}}).bind(this),e)}catch(S){return e(S)}}).bind(this),e)})}const Jo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Lt;function ea(n,c){return new Promise((T,s)=>{Lt||(Lt=function(i){const l=[];return typeof i=="function"?l.push(`(${i})()`):l.push(i),URL.createObjectURL(new Blob(l))}(Jo));const e=new Worker(Lt);e.addEventListener("message",function(i){if(c.signal&&c.signal.aborted)e.terminate();else if(i.data.progress===void 0){if(i.data.error)return s(new Error(i.data.error)),void e.terminate();T(i.data.file),e.terminate()}else c.onProgress(i.data.progress)}),e.addEventListener("error",s),c.signal&&c.signal.addEventListener("abort",()=>{s(c.signal.reason),e.terminate()}),e.postMessage({file:n,imageCompressionLibUrl:c.libURL,options:{...c,onProgress:void 0,signal:void 0}})})}function je(n,c){return new Promise(function(T,s){let e,t,i,l,v,x;if(e={...c},i=0,{onProgress:l}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,v=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=u=>{i=u,typeof l=="function"&&l(i)},!(n instanceof Blob||n instanceof Xo))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return s(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!v||typeof Worker!="function"||x)return wn(n,e).then((function(u){try{return t=u,o.call(this)}catch(b){return s(b)}}).bind(this),s);var r=(function(){try{return o.call(this)}catch(u){return s(u)}}).bind(this),a=function(u){try{return wn(n,e).then(function(b){try{return t=b,r()}catch(A){return s(A)}},s)}catch(b){return s(b)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ea(n,e).then(function(u){try{return t=u,r()}catch{return a()}},a)}catch{a()}function o(){try{t.name=n.name,t.lastModified=n.lastModified}catch{}try{e.preserveExif&&n.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===n.type)&&(t=In(n,t))}catch{}return T(t)}})}je.getDataUrlFromFile=Mn,je.getFilefromDataUrl=rn,je.loadImage=_n,je.drawImageInCanvas=Pn,je.drawFileInCanvas=Ft,je.canvasToFile=Pt,je.getExifOrientation=En,je.handleMaxWidthOrHeight=On,je.followExifOrientation=Nn,je.cleanupCanvasMemory=Ze,je.isAutoOrientationInBrowser=jt,je.approximateBelowMaximumCanvasSizeOfBrowser=Fn,je.copyExifWithoutOrientation=In,je.getBrowserName=bt,je.version="2.0.2";var on={},ta=ot;Object.defineProperty(on,"__esModule",{value:!0});var Bn=on.default=void 0,na=ta(at()),jn=f;Bn=on.default=(0,na.default)([(0,jn.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,jn.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn");var an={},ra=ot;Object.defineProperty(an,"__esModule",{value:!0});var zn=an.default=void 0,oa=ra(at()),aa=f;zn=an.default=(0,oa.default)((0,aa.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut");var sn={},sa=ot;Object.defineProperty(sn,"__esModule",{value:!0});var Hn=sn.default=void 0,ia=sa(at()),la=f;Hn=sn.default=(0,ia.default)((0,la.jsx)("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen");var ln={},ca=ot;Object.defineProperty(ln,"__esModule",{value:!0});var Wn=ln.default=void 0,da=ca(at()),ua=f;Wn=ln.default=(0,da.default)((0,ua.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Rt=({path:n,imageUrl:c,setImageUrl:T,imageStoragePath:s,setImageStoragePath:e,imageTitle:t,setImageTitle:i,onDelete:l})=>{const[v,x]=N.useState(!1),[r,a]=N.useState(0),[o,u]=N.useState(!1),[b,A]=N.useState(1),$=N.useRef(null),y=N.useRef(null),[P,_]=N.useState(!1),[U,F]=N.useState(!1),[m,M]=N.useState(""),[p,g]=N.useState("info"),w=async h=>{const d=h.target.files[0];if(!d)return;const O={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0};try{let k=d;d.size>1024*1024&&(k=await je(d,O),M("Your image was compressed before uploading due to file size larger than 1 MB."),g("info"),F(!0)),x(!0);const Q=`${new Date().getTime()}-${k.name}`,W=fn(),V=hn(W,`${n}/${Q}`),z=Xn(V,k);z.on("state_changed",E=>{const q=E.bytesTransferred/E.totalBytes*100;a(q)},E=>{console.error("Upload failed:",E),x(!1),a(0)},()=>{Jn(z.snapshot.ref).then(E=>{T(E),e(V.fullPath),x(!1),a(0),$.current&&($.current.value="")})})}catch(k){console.error("Error processing image:",k),x(!1),a(0)}},j=()=>{_(!P)},S=async()=>{if(!s)return;const h=fn(),d=hn(h,s);try{await er(d),console.log("Image deleted successfully"),T(""),e(""),i(""),l(),M("The image has been deleted."),g("success"),F(!0)}catch(O){console.error("Error removing file: ",O),M("There was an issue deleting your image."),g("error"),F(!0)}},I=()=>A(b*1.2),C=()=>A(b/1.2);N.useEffect(()=>{const h=()=>{const d=!!document.fullscreenElement;_(d),document.body.style.backgroundColor=d?"white":""};return document.addEventListener("fullscreenchange",h),()=>{document.removeEventListener("fullscreenchange",h)}},[]);const D=(h,d)=>{d!=="clickaway"&&F(!1)};return f.jsxs("div",{children:[f.jsx("input",{type:"file",onChange:w,disabled:v,ref:$}),v&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:["Uploading... ",Math.round(r),"%"]}),f.jsx("div",{style:{width:"100%",backgroundColor:"#ddd"},children:f.jsx("div",{style:{height:"20px",width:`${r}%`,backgroundColor:"green"}})})]}),c&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("img",{ref:y,src:c,alt:"Design",onClick:()=>u(!0),style:{width:"100%",maxHeight:"300px",objectFit:"contain",cursor:"pointer"}}),f.jsx(rt,{onClick:S,style:{marginLeft:"10px"},children:f.jsx(kt,{})})]}),f.jsx("label",{htmlFor:"imageTitle",style:{display:"block",marginTop:"10px"}}),f.jsx("textarea",{id:"imageTitle",name:"imageTitle",value:t,onChange:h=>i(h.target.value),rows:"2",style:{width:"100%"},placeholder:"Figure."})]}),f.jsx(dt,{open:o,onClose:()=>u(!1),fullScreen:P,PaperProps:{style:{backgroundColor:"white",boxShadow:"none",maxWidth:P?"none":void 0,maxHeight:P?"none":void 0,height:P?"100%":void 0,width:P?"100%":void 0,overflowY:"auto"}},children:f.jsxs(ut,{children:[f.jsx("div",{style:{textAlign:"center"},children:f.jsx("img",{src:c,alt:"Zoomed Design",style:{maxWidth:"100%",maxHeight:P?"100vh":void 0,transform:`scale(${b})`,transition:"transform 0.2s ease-out"}})}),f.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[f.jsx(rt,{onClick:I,children:f.jsx(Bn,{})}),f.jsx(rt,{onClick:C,style:{marginLeft:"10px"},children:f.jsx(zn,{})}),f.jsx(rt,{onClick:j,style:{marginLeft:"10px"},children:f.jsx(Hn,{})}),P&&f.jsx(rt,{onClick:j,style:{position:"absolute",top:20,right:20},children:f.jsx(Wn,{})})]})]})}),f.jsx(ht,{open:U,autoHideDuration:6e3,onClose:D,children:f.jsx(ft,{onClose:D,severity:p,sx:{width:"100%"},children:m})})]})},fa=({designs:n,setDesigns:c,setIsAdding:T,getDesigns:s,onReturnToDashboard:e})=>{const{userDetails:t}=St();console.log("Add Design loaded");const[i,l]=N.useState(""),[v,x]=N.useState(""),[r,a]=N.useState(""),[o,u]=N.useState(""),[b,A]=N.useState(""),[$,y]=N.useState(""),[P,_]=N.useState(!1),[U,F]=N.useState(""),[m,M]=N.useState("info"),[p,g]=N.useState(!1),[w,j]=N.useState("");console.log("Adding New Design from user:",t);const S=()=>{g(!1)},I=(D,h)=>{h!=="clickaway"&&_(!1)},C=async D=>{if(D.preventDefault(),!t||!t.uid){console.error("User object is undefined or missing UID."),j("You must be signed in to add a design."),g(!0);return}if(!i||!v){j("All fields are required."),g(!0);return}const h={title:r,description:i,dateDue:Sn.fromDate(new Date(v)),dateCreated:Gt(),imageUrl:o,imageStoragePath:b,imageTitle:$,userId:t.uid};try{await Xt(Ee(ie,"designs"),h),c([...n,h]),setTimeout(()=>{T(!1),s()},1e3),F(`${r} has been Added.`),M("success"),_(!0),a(""),l(""),x(""),u(""),A(""),y("")}catch(d){console.log(d),j("There was an issue adding your design."),g(!0)}};return f.jsxs("div",{className:"small-container",children:[f.jsx("button",{onClick:e,className:"muted-button margin-top-20",children:" All Designs"}),f.jsxs("form",{onSubmit:C,children:[f.jsx("h1",{children:"Create Design"}),f.jsx("label",{htmlFor:"title",children:"Title"}),f.jsx("input",{id:"title",type:"text",name:"title",value:r,onChange:D=>a(D.target.value)}),f.jsx("label",{htmlFor:"description",children:"Description"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Objective: What is the goal for this design?"}),f.jsx("li",{children:"Rationale: Why is this new design being done?"}),f.jsx("li",{children:"Selected Target Identified: What is the target for the design being made?"}),f.jsx("li",{children:"Functional Modification: What is being done to this target?"}),f.jsx("li",{children:"Overview/Plan for making the modification: What are the steps to be carried out to meet the objective?"})]}),f.jsx("textarea",{id:"description",name:"description",value:i,onChange:D=>l(D.target.value),rows:"10",style:{width:"100%"}}),f.jsx("label",{htmlFor:"file",children:"Image"}),f.jsx(Rt,{path:"designs",imageUrl:o,setImageUrl:u,imageStoragePath:b,setImageStoragePath:A,imageTitle:$,setImageTitle:y,onDelete:()=>{u(""),A(""),y("")}}),f.jsx("label",{htmlFor:"dateDue",children:"Due Date"}),f.jsx("input",{id:"date",type:"date",name:"date",value:v,onChange:D=>x(D.target.value)}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("input",{type:"submit",value:"Add"}),f.jsx("input",{style:{marginLeft:"12px"},className:"muted-button",type:"button",value:"Cancel",onClick:()=>T(!1)})]})]}),f.jsxs(dt,{open:p,onClose:S,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[f.jsx(mt,{id:"alert-dialog-title",children:"Notification"}),f.jsx(ut,{children:f.jsx(Dt,{id:"alert-dialog-description",children:w})}),f.jsx(vt,{children:f.jsx(_e,{onClick:S,autoFocus:!0,children:"Ok"})})]}),f.jsx(ht,{open:P,autoHideDuration:1e3,onClose:I,children:f.jsx(ft,{onClose:I,severity:m,sx:{width:"100%"},children:U})})]})},ha=({designId:n,setIsAddingBuild:c,refreshBuilds:T})=>{const[s,e]=N.useState(""),[t,i]=N.useState(""),{userDetails:l}=St();console.log("AddBuild loaded");const[v,x]=N.useState(!1),[r,a]=N.useState(""),[o,u]=N.useState(!1),[b,A]=N.useState(""),[$,y]=N.useState("info");console.log("Adding New Build by user:",l);const P=()=>{x(!1)},_=(F,m)=>{m!=="clickaway"&&u(!1)},U=async F=>{if(F.preventDefault(),!l||!l.uid){console.error("UserDetails object is undefined or missing UID."),a("You must be signed in to add a build."),x(!0);return}if(!t){a("Build description is required."),x(!0);return}try{const m=await Xt(Ee(ie,"builds"),{title:s,description:t,design_ID:n,dateCreated:Gt(),userId:l.uid});console.log("Build added with ID: ",m.id),console.log("Added New Build by user:",l),A("Your build has been successfully added."),y("success"),u(!0),setTimeout(()=>{e(""),i(""),c(!1),T()},1e3)}catch(m){console.error("Error adding build: ",m);let M=`Failed to add the build. ${m.message||"Please try again later."}`;m.code==="permission-denied"&&(M="You do not have permission to perform this operation."),A(M),y("error"),u(!0)}};return f.jsxs("div",{className:"small-container",children:[f.jsxs("form",{onSubmit:U,children:[f.jsx("label",{htmlFor:"buildTitle",children:"Title"}),f.jsx("input",{id:"buildTitle",type:"text",value:s,onChange:F=>e(F.target.value),style:{width:"100%",marginBottom:"20px"}}),f.jsx("label",{htmlFor:"buildDescription",children:"Description"}),f.jsx("textarea",{id:"buildDescription",value:t,onChange:F=>i(F.target.value),rows:"4",style:{width:"100%"}}),f.jsxs("div",{className:"flex-space-between",children:[f.jsx("input",{type:"submit",value:"Save",className:"button muted-button"}),f.jsx("button",{onClick:()=>c(!1),className:"button muted-button",children:"Cancel"})]})]}),f.jsxs(dt,{open:v,onClose:P,children:[f.jsx(mt,{children:"Notification"}),f.jsx(ut,{children:f.jsx(Dt,{children:r})}),f.jsx(vt,{children:f.jsx(_e,{onClick:P,children:"OK"})})]}),f.jsx(ht,{open:o,autoHideDuration:6e3,onClose:_,children:f.jsx(ft,{onClose:_,severity:$,sx:{width:"100%"},children:b})})]})},pa=({designId:n,buildId:c,refreshTests:T,setAddingTestIdForBuild:s})=>{const[e,t]=N.useState(""),[i,l]=N.useState(""),[v,x]=N.useState(""),[r,a]=N.useState(""),{userDetails:o}=St();console.log("AddTest loaded");const[u,b]=N.useState(!1),[A,$]=N.useState(""),[y,P]=N.useState(!1),[_,U]=N.useState(""),[F,m]=N.useState("info"),M=async()=>{if(!i){$("Test description cannot be empty!"),b(!0);return}try{await Xt(Ee(ie,"tests"),{title:e,build_ID:c,design_ID:n,dateCreated:Gt(),description:i,results:v,conclusions:r,userId:o.uid}),setTimeout(()=>{T(c),t(""),l(""),x(""),a(""),s(null)},1e3),U("Test added successfully"),m("success"),P(!0)}catch(p){console.error("Error adding test: ",p),U("Failed to add the test"),m("error"),P(!0)}};return f.jsxs("div",{children:[f.jsx("textarea",{placeholder:"Test Title",value:e,onChange:p=>t(p.target.value),style:{width:"100%",margin:"10px 0"}}),f.jsx("textarea",{placeholder:"Describe the test",value:i,onChange:p=>l(p.target.value),rows:"4",style:{width:"100%"}}),f.jsx("textarea",{placeholder:"Test Results",value:v,onChange:p=>x(p.target.value),rows:"4",style:{width:"100%",margin:"10px 0"}}),f.jsx("textarea",{placeholder:"Test Conclusions",value:r,onChange:p=>a(p.target.value),rows:"4",style:{width:"100%",margin:"10px 0"}}),f.jsxs("div",{className:"flex-space-between",children:[f.jsx("button",{onClick:M,className:"button muted-button",children:"Save"}),f.jsx("button",{onClick:()=>s(null),className:"button muted-button",children:"Cancel"})]}),f.jsxs(dt,{open:u,onClose:()=>b(!1),children:[f.jsx(mt,{children:"Notification"}),f.jsx(ut,{children:f.jsx(Dt,{children:A})}),f.jsx(vt,{children:f.jsx(_e,{onClick:()=>b(!1),children:"OK"})})]}),f.jsx(ht,{open:y,autoHideDuration:6e3,onClose:()=>P(!1),children:f.jsx(ft,{onClose:()=>P(!1),severity:F,sx:{width:"100%"},children:_})})]})};var cn={},ga=ot;Object.defineProperty(cn,"__esModule",{value:!0});var qt=cn.default=void 0,ba=ga(at()),va=f;qt=cn.default=(0,ba.default)((0,va.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var dn={},ma=ot;Object.defineProperty(dn,"__esModule",{value:!0});var Yt=dn.default=void 0,xa=ma(at()),ya=f;Yt=dn.default=(0,xa.default)((0,ya.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");var un={},Ca=ot;Object.defineProperty(un,"__esModule",{value:!0});var Kt=un.default=void 0,wa=Ca(at()),ja=f;Kt=un.default=(0,wa.default)((0,ja.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");const Ta=({selectedDesign:n,setIsEditing:c,getDesigns:T,onReturnToDashboard:s})=>{const{userDetails:e,loading:t}=St();console.log("Edit page loaded");const i=n.id,[l,v]=N.useState(n.description),[x,r]=N.useState(n.dateDue||""),[a,o]=N.useState(""),[u,b]=N.useState(!1),[A,$]=N.useState([]),[y,P]=N.useState({}),[_,U]=N.useState(null),[F,m]=N.useState({}),[M,p]=N.useState({}),[g,w]=N.useState({}),[j,S]=N.useState({}),[I,C]=N.useState(""),[D,h]=N.useState(""),[d,O]=N.useState(""),[k,B]=N.useState({}),[Q,W]=N.useState({}),V=N.useRef(null),z=N.useRef(null),[E,q]=N.useState(!1),[le,J]=N.useState(""),[ee,re]=N.useState(()=>{}),[he,oe]=N.useState(!1),[Ge,ve]=N.useState(""),[de,ue]=N.useState("info"),[ae,X]=N.useState({design:!1,builds:!1,tests:!1}),[ge,ye]=N.useState({}),[pe,Se]=N.useState({}),[fe,se]=N.useState({}),[Ce,Fe]=N.useState({});console.log("Editing Design by user:",e);const xt=(R,L)=>{se(H=>({...H,[R]:L}))},me=(R,L)=>{Fe(H=>({...H,[R]:L}))},Qe=async R=>{const L=fe[R];try{const H=we(ie,"builds",R);await Ke(H,{title:L},{merge:!0}),se(G=>{const Y={...G};return delete Y[R],Y}),yt()}catch(H){console.error("Failed to save build title:",H)}},xe=async(R,L)=>{const H=Ce[R],G=we(ie,"tests",R);await Ke(G,{title:H},{merge:!0}),Fe(Y=>{const ne={...Y};return delete ne[R],ne}),st(L)},Re=(R,L)=>{m(H=>({...H,[R]:L})),X(H=>({...H,builds:!0}))},Ae=(R,L)=>{p(H=>({...H,[R]:L})),X(H=>({...H,tests:!0}))},We=async R=>{const L=we(ie,"builds",R);await Ke(L,{description:F[R]},{merge:!0}),ve("Your build has been updated."),ue("success"),oe(!0),yt(),X(H=>({...H,builds:!1}))},Pe=async(R,L)=>{const H={};if(M[R]!==void 0&&(H.description=M[R]),g[R]!==void 0&&(H.results=g[R]),j[R]!==void 0&&(H.conclusions=j[R]),Object.keys(H).length>0){const G=we(ie,"tests",R);try{await Ke(G,H,{merge:!0}),console.log(`Successfully updated test ID: ${R}`),ve("Your test has been updated."),ue("success"),oe(!0),await st(L)}catch(Y){console.error(`Error updating test ID: ${R}:`,Y),ve("There was an issue updating your test."),ue("error"),oe(!0)}}X(G=>({...G,tests:!1}))},Xe=(R,L)=>{w(H=>({...H,[R]:L})),X(H=>({...H,tests:!0}))},At=(R,L)=>{S(H=>({...H,[R]:L})),X(H=>({...H,tests:!0}))};N.useEffect(()=>{if(n){v(n.description||""),o(n.title||""),(async()=>{const H=we(ie,"designs",i),G=await tr(H);if(G.exists()){const Y=G.data();C(Y.imageUrl||""),h(Y.imageStoragePath||""),O(Y.imageTitle||"")}})();let L;n.dateDue?(typeof n.dateDue=="string"?L=n.dateDue:n.dateDue.toDate&&(L=n.dateDue.toDate().toISOString().split("T")[0]),r(L)):r("")}},[n,i]),N.useEffect(()=>{!t&&e&&(async()=>{if(!e)return;const L=nt(Ee(ie,"builds"),De("design_ID","==",i),De("userId","==",e.uid),wt("dateCreated")),G=(await ct(L)).docs.map(Le=>({id:Le.id,...Le.data()}));let Y={},ne={},ce={},ke={},Ie={},lt={};for(const Le of G){Y[Le.id]={imageUrl:Le.imageUrl||"",imageStoragePath:Le.imageStoragePath||"",imageTitle:Le.imageTitle||""};const Bt=nt(Ee(ie,"tests"),De("build_ID","==",Le.id),De("userId","==",e.uid),wt("dateCreated")),Qn=(await ct(Bt)).docs.map(Ct=>{const gt=Ct.data();return Ie[Ct.id]={imageUrl:gt.imageUrl||"",imageStoragePath:gt.imageStoragePath||"",imageTitle:gt.imageTitle||""},lt[Ct.id]=gt.description||"",ce[Ct.id]=gt.results||"",ke[Ct.id]=gt.conclusions||"",{id:Ct.id,...gt}});ne[Le.id]=Qn}$(G),B(Y),P(ne),p(lt),w(ce),S(ke),W(Ie)})()},[t,e,n.id,i]);const yt=async()=>{if(!e){console.log("User details not loaded yet");return}try{console.log("Refreshing builds for user UID:",e==null?void 0:e.uid),console.log("Selected design ID for query:",n==null?void 0:n.id);const R=nt(Ee(ie,"builds"),De("design_ID","==",i),De("userId","==",e.uid),wt("dateCreated"));console.log("Builds query details:",JSON.stringify(R,null,2));const L=await ct(R);console.log("Builds snapshot details:",JSON.stringify(L.docs.map(G=>G.data()),null,2)),console.log("Builds query successful, number of builds fetched: ",L.docs.length);const H=L.docs.map(G=>(console.log("Build doc path: ",G.ref.path),{id:G.id,...G.data()}));$(H),console.log("New builds state after refresh:",H)}catch(R){console.error("Error refreshing builds:",R),R.code==="permission-denied"?console.error("Permission denied when trying to refresh builds:",R):console.error("An unexpected error occurred when trying to refresh builds:",R)}},st=async R=>{if(!e){console.log("User details not loaded yet");return}const L=nt(Ee(ie,"tests"),De("build_ID","==",R),De("userId","==",e.uid),wt("dateCreated")),G=(await ct(L)).docs.map(Y=>({id:Y.id,...Y.data()}));P(Y=>({...Y,[R]:G}))},It=async R=>{if(R.preventDefault(),!l||!x){J("All fields are required."),q(!0);return}let L={title:a,description:l,dateDue:Sn.fromDate(new Date(x)),imageUrl:I,imageStoragePath:D,imageTitle:d,userId:e.uid};try{await Ke(we(ie,"designs",i),L,{merge:!0}),ve("Your design has been updated."),ue("success"),oe(!0)}catch(H){console.error("Error updating design:",H),ve("There was an issue updating your design."),ue("error"),oe(!0)}X(H=>({...H,design:!1}))},Je=async(R,L,H,G)=>{const Y=we(ie,"builds",R),ne={...L!==void 0&&{imageUrl:L},...H!==void 0&&{imageStoragePath:H},...G!==void 0&&{imageTitle:G}};Object.keys(ne).length>0&&await Ke(Y,ne,{merge:!0})},Nt=async()=>{try{const R=we(ie,"designs",i);await Ke(R,{imageUrl:"",imageStoragePath:"",imageTitle:""},{merge:!0}),C(""),h(""),O(""),console.log("Design image references removed from Firestore.")}catch(R){console.error("Failed to update design document in Firestore:",R)}},qe=async R=>{const L=we(ie,"builds",R);await Ke(L,{imageUrl:"",imageStoragePath:"",imageTitle:""},{merge:!0})},Ye=R=>{var L,H,G;return f.jsx(Rt,{path:`builds/${R.id}/images`,imageUrl:((L=k[R.id])==null?void 0:L.imageUrl)||"",setImageUrl:Y=>{B(ne=>{const ce={...ne,[R.id]:{...ne[R.id],imageUrl:Y}};return Je(R.id,Y,ce[R.id].imageStoragePath,ce[R.id].imageTitle),ce})},imageStoragePath:((H=k[R.id])==null?void 0:H.imageStoragePath)||"",setImageStoragePath:Y=>{B(ne=>{const ce={...ne,[R.id]:{...ne[R.id],imageStoragePath:Y}};return Je(R.id,ce[R.id].imageUrl,Y,ce[R.id].imageTitle),ce})},imageTitle:((G=k[R.id])==null?void 0:G.imageTitle)||"",setImageTitle:Y=>{B(ne=>{const ce={...ne,[R.id]:{...ne[R.id],imageTitle:Y}};return Je(R.id,ce[R.id].imageUrl,ce[R.id].imageStoragePath,Y),ce})},onDelete:()=>qe(R.id)})},it=async R=>{const L=we(ie,"tests",R);await Ke(L,{imageUrl:"",imageStoragePath:"",imageTitle:""},{merge:!0})},pt=()=>{const R=Object.entries(ae).filter(([H,G])=>G).map(([H])=>H).join(", ");if(!R.length){s();return}const L=`You have unsaved changes in the following sections: ${R}. Are you sure you want to leave?`;J(L),re(()=>()=>{X({design:!1,builds:!1,tests:!1}),s()}),q(!0)};N.useEffect(()=>{const R=L=>{Object.values(ae).some(G=>G)&&(L.preventDefault(),L.returnValue="")};return window.addEventListener("beforeunload",R),()=>window.removeEventListener("beforeunload",R)},[ae]);const $t=async R=>{const L=nt(Ee(ie,"tests"),De("build_ID","==",R),De("userId","==",e.uid)),H=await ct(L);for(const G of H.docs)await Tt(we(ie,"tests",G.id));await Tt(we(ie,"builds",R)),await yt(),ve("Build and its tests (if any) deleted successfully."),ue("success"),oe(!0)},et=async(R,L)=>{await Tt(we(ie,"tests",R)),await st(L),ve("Test deleted successfully."),ue("success"),oe(!0)},tt=R=>{J("Are you sure you want to delete this build and all associated tests? This action cannot be undone."),re(()=>()=>$t(R)),q(!0)},Ln=(R,L)=>{J("Are you sure you want to delete this test? This action cannot be undone."),re(()=>()=>et(R,L)),q(!0)},Vn=R=>{var H,G,Y;const L=async(ne,ce,ke,Ie)=>{const lt={};if(typeof ce<"u"&&(lt.imageUrl=ce),typeof ke<"u"&&(lt.imageStoragePath=ke),typeof Ie<"u"&&(lt.imageTitle=Ie),Object.keys(lt).length===0){console.log("No data to update for testId:",ne);return}const Le=we(ie,"tests",ne);try{await Ke(Le,lt,{merge:!0}),console.log("Firestore updated successfully for testId:",ne)}catch(Bt){console.error("Error updating Firestore for testId:",ne,Bt)}};return f.jsx(Rt,{path:`tests/${R.id}/images`,imageUrl:((H=Q[R.id])==null?void 0:H.imageUrl)||"",setImageUrl:ne=>{var ce,ke;W(Ie=>({...Ie,[R.id]:{...Ie[R.id],imageUrl:ne}})),L(R.id,ne,(ce=Q[R.id])==null?void 0:ce.imageStoragePath,(ke=Q[R.id])==null?void 0:ke.imageTitle)},imageStoragePath:((G=Q[R.id])==null?void 0:G.imageStoragePath)||"",setImageStoragePath:ne=>{var ce,ke;W(Ie=>({...Ie,[R.id]:{...Ie[R.id],imageStoragePath:ne}})),L(R.id,(ce=Q[R.id])==null?void 0:ce.imageUrl,ne,(ke=Q[R.id])==null?void 0:ke.imageTitle)},imageTitle:((Y=Q[R.id])==null?void 0:Y.imageTitle)||"",setImageTitle:ne=>{var ce,ke;W(Ie=>({...Ie,[R.id]:{...Ie[R.id],imageTitle:ne}})),L(R.id,(ce=Q[R.id])==null?void 0:ce.imageUrl,(ke=Q[R.id])==null?void 0:ke.imageStoragePath,ne)},onDelete:()=>it(R.id)})};return f.jsxs("div",{className:"small-container",children:[f.jsx("button",{onClick:()=>{Object.values(ae).some(L=>L)?pt():s()},className:"muted-button margin-top-20",children:" All Designs"}),f.jsx("div",{className:"design-record",children:f.jsxs("form",{onSubmit:It,children:[f.jsx("h1",{children:"Design Document"}),f.jsx("div",{style:{marginBottom:"20px"}}),f.jsx("label",{htmlFor:"title",style:{textDecoration:"underline"},children:"Title"}),f.jsx("input",{id:"title",type:"text",name:"title",value:a,onChange:R=>{o(R.target.value),X(L=>({...L,design:!0}))}}),f.jsx("label",{htmlFor:"description",style:{textDecoration:"underline"},children:"Description"}),f.jsxs("ul",{children:[f.jsx("li",{children:"Objective: What is the goal for this design?"}),f.jsx("li",{children:"Rationale: Why is this new design being done?"}),f.jsx("li",{children:"Selected Target: What is the target for the design being made?"}),f.jsx("li",{children:"Functional Modification: What is being done to this target?"}),f.jsx("li",{children:"Overview/Plan for making the modification: What are the steps to be carried out to meet the objective?"})]}),f.jsx("textarea",{id:"description",name:"description",value:l,onChange:R=>{v(R.target.value),X(L=>({...L,design:!0}))},rows:"10",style:{width:"100%"}}),f.jsx("label",{htmlFor:"file",style:{textDecoration:"underline"},children:"Image"}),f.jsx(Rt,{path:`designs/${i}`,imageUrl:I,setImageUrl:C,imageStoragePath:D,setImageStoragePath:h,imageTitle:d,setImageTitle:O,onDelete:Nt}),f.jsx("label",{htmlFor:"dateDue",style:{textDecoration:"underline"},children:"Due Date"}),f.jsx("input",{id:"dateDue",type:"date",name:"dateDue",value:x,onChange:R=>{r(R.target.value),X(L=>({...L,design:!0}))}}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("input",{type:"submit",value:"Update"}),f.jsx("button",{style:{marginLeft:"12px"},className:"muted-button",type:"button",onClick:()=>c(!1),children:"Cancel"})]})]})}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex-space-between",children:[f.jsx("h2",{children:"Builds"}),f.jsxs("button",{className:"button muted-button",onClick:()=>{b(!0),setTimeout(()=>{V.current&&V.current.scrollIntoView({behavior:"smooth"})},100)},style:{marginTop:"20px"},children:[f.jsx("span",{role:"img","aria-label":"Add Build",children:""})," Build"]})]}),A.map((R,L)=>f.jsxs("div",{className:"build-record",children:[f.jsxs("div",{className:"flex-space-between align-items-center",children:[f.jsx("div",{children:fe[R.id]!==void 0?f.jsx(Qt,{variant:"outlined",size:"small",fullWidth:!0,value:fe[R.id],onChange:H=>xt(R.id,H.target.value),onBlur:()=>Qe(R.id),autoFocus:!0,InputProps:{endAdornment:f.jsx(rt,{onClick:()=>Qe(R.id),size:"small",children:f.jsx(Kt,{})})}}):f.jsx("div",{className:"editableTitle",onClick:()=>se(H=>({...H,[R.id]:R.title||`Build ${L+1}`})),style:{cursor:"pointer"},children:R.title||`Build ${L+1}`})}),f.jsxs("div",{children:[f.jsx("button",{onClick:()=>ye(H=>({...H,[R.id]:!H[R.id]})),className:"button muted-button",style:{border:"none",background:"none"},children:ge[R.id]?f.jsx(Yt,{}):f.jsx(qt,{})}),f.jsx("button",{className:"button muted-button",style:{border:"none",background:"none"},onClick:()=>tt(R.id),children:f.jsx(kt,{})}),f.jsxs("button",{className:"button muted-button",onClick:()=>{U(R.id),setTimeout(()=>{z.current&&z.current.scrollIntoView({behavior:"smooth"})},100)},children:[f.jsx("span",{role:"img","aria-label":"Add Test",children:""})," Test"]})]})]}),ge[R.id]&&f.jsxs(f.Fragment,{children:[f.jsx("textarea",{value:F[R.id]||R.description,onChange:H=>Re(R.id,H.target.value),rows:"4",style:{width:"100%"}}),f.jsx("button",{onClick:()=>We(R.id),children:"Update"}),f.jsx("div",{children:Ye(R)}),y[R.id]&&y[R.id].map((H,G)=>f.jsxs("div",{className:"test-record",children:[f.jsxs("div",{className:"flex-space-between align-items-center",children:[f.jsx("div",{children:Ce[H.id]!==void 0?f.jsx(Qt,{variant:"outlined",size:"small",fullWidth:!0,value:Ce[H.id],onChange:Y=>me(H.id,Y.target.value),onBlur:()=>xe(H.id,R.id),autoFocus:!0,InputProps:{endAdornment:f.jsx(rt,{onClick:()=>xe(H.id,R.id),size:"small",children:f.jsx(Kt,{})})}}):f.jsx("div",{className:"editableTitle",onClick:()=>Fe(Y=>({...Y,[H.id]:H.title||`Test ${G+1}`})),style:{cursor:"pointer"},children:H.title||`Test ${G+1}`})}),f.jsxs("div",{children:[f.jsx("button",{onClick:()=>Se(Y=>({...Y,[H.id]:!Y[H.id]})),className:"button muted-button",style:{border:"none",background:"none"},children:pe[H.id]?f.jsx(Yt,{}):f.jsx(qt,{})}),f.jsx("button",{className:"button muted-button",style:{border:"none",background:"none"},onClick:()=>Ln(H.id,R.id),children:f.jsx(kt,{})})]})]}),pe[H.id]&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("strong",{children:"Description"}),f.jsx("textarea",{value:M[H.id]||H.description,onChange:Y=>Ae(H.id,Y.target.value),rows:"4",style:{width:"100%"}})]}),f.jsx("div",{children:Vn(H,R.id)}),f.jsxs("div",{children:[f.jsx("strong",{children:"Results"}),f.jsx("textarea",{value:g[H.id]||H.results,onChange:Y=>Xe(H.id,Y.target.value),rows:"4",style:{width:"100%",marginTop:"10px"},placeholder:"Results"})]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Conclusions"}),f.jsx("textarea",{value:j[H.id]||H.conclusions,onChange:Y=>At(H.id,Y.target.value),rows:"4",style:{width:"100%",marginTop:"10px"},placeholder:"Conclusions"})]}),f.jsx("button",{onClick:()=>Pe(H.id,R.id),children:"Update"})]})]},H.id))]}),_===R.id&&f.jsxs("div",{className:"new-build-record",ref:z,children:[f.jsx("h3",{children:"Add New Test"}),f.jsx(pa,{designId:n.id,buildId:R.id,refreshTests:()=>st(R.id),setAddingTestIdForBuild:U})]})]},R.id)),f.jsx("div",{children:u&&f.jsxs("div",{className:"new-build-record",ref:V,children:[f.jsx("h3",{children:"Add New Build"}),f.jsx(ha,{designId:n.id,setIsAddingBuild:b,refreshBuilds:yt})]})})]}),f.jsxs(dt,{open:E,onClose:()=>q(!1),children:[f.jsx(mt,{children:"Confirmation Required"}),f.jsx(ut,{children:f.jsx(Dt,{children:le})}),f.jsxs(vt,{children:[f.jsx(_e,{onClick:()=>q(!1),children:"Cancel"}),f.jsx(_e,{onClick:()=>{ee(),q(!1)},autoFocus:!0,children:"Confirm"})]})]}),f.jsx(ht,{open:he,autoHideDuration:6e3,onClose:()=>oe(!1),children:f.jsx(ft,{onClose:()=>oe(!1),severity:de,sx:{width:"100%"},children:Ge})})]})},Sa=()=>{const{userDetails:n,loading:c}=St();console.log("Dashboard loaded");const[T,s]=N.useState([]),[e,t]=N.useState(null),[i,l]=N.useState(!1),[v,x]=N.useState(!1),[r,a]=N.useState(!1),[o,u]=N.useState(""),[b,A]=N.useState(""),[$,y]=N.useState(!1),[P,_]=N.useState(null),[U,F]=N.useState(!1),[m,M]=N.useState(""),[p,g]=N.useState("info"),w=()=>{x(!1),l(!1),t(null),j()},j=N.useCallback(async()=>{let D;n&&n.isAdmin?D=nt(Ee(ie,"designs"),wt("dateCreated","desc")):n&&(D=nt(Ee(ie,"designs"),De("userId","==",n.uid),wt("dateCreated","desc")));const d=(await ct(D)).docs.map(O=>({id:O.id,...O.data()}));s(d)},[n]);N.useEffect(()=>{!c&&n&&j()},[n,c,j]);const S=D=>{const[h]=T.filter(d=>d.id===D);t(h),x(!0)},I=D=>{_(D),u("Are you sure you want to delete this design? This action cannot be undone."),a(!0)},C=async()=>{if(P)if(b!==n.uid)M("User ID confirmation failed. Enter the correct User ID."),g("error"),F(!0);else try{const D=nt(Ee(ie,"builds"),De("design_ID","==",P),De("userId","==",n.uid)),h=await ct(D);for(const O of h.docs){const k=O.id,B=nt(Ee(ie,"tests"),De("build_ID","==",k),De("userId","==",n.uid)),Q=await ct(B);for(const W of Q.docs)await Tt(we(ie,"tests",W.id));await Tt(we(ie,"builds",k))}await Tt(we(ie,"designs",P));const d=T.filter(O=>O.id!==P);s(d),M("Your design and its associated builds and tests have been deleted."),g("success"),F(!0)}catch(D){console.error("Error deleting design, builds, and tests: ",D),M("There was an issue deleting your design and its associated builds and tests."),g("error"),F(!0)}finally{A(""),y(!1),_(null)}};return f.jsxs("div",{className:"container",children:[!i&&!v&&f.jsxs(f.Fragment,{children:[f.jsx(No,{setIsAdding:l}),f.jsx(Qo,{designs:T,handleEdit:S,handleDelete:I,isAdmin:(n==null?void 0:n.isAdmin)??!1})]}),i&&f.jsx(fa,{designs:T,setDesigns:s,setIsAdding:l,getDesigns:j,onReturnToDashboard:w}),v&&f.jsx(Ta,{designs:T,selectedDesign:e,setDesigns:s,setIsEditing:x,getDesigns:j,onReturnToDashboard:w}),f.jsxs(dt,{open:r,onClose:()=>a(!1),PaperProps:{style:{minWidth:500}},children:[f.jsx(mt,{children:"Confirm Deletion"}),f.jsx(ut,{children:f.jsx(Dt,{children:o})}),f.jsxs(vt,{children:[f.jsx(_e,{onClick:()=>a(!1),children:"No, cancel"}),f.jsx(_e,{onClick:()=>{y(!0),a(!1)},color:"primary",children:"Yes, delete it"})]})]}),f.jsxs(dt,{open:$,onClose:()=>y(!1),PaperProps:{style:{minWidth:500}},children:[f.jsx(mt,{children:"Confirm Your User ID"}),f.jsx(ut,{children:f.jsx(Qt,{autoFocus:!0,margin:"dense",id:"userId-confirm",label:"User ID",type:"text",fullWidth:!0,variant:"outlined",value:b,onChange:D=>A(D.target.value)})}),f.jsxs(vt,{children:[f.jsx(_e,{onClick:()=>y(!1),children:"No, cancel"}),f.jsx(_e,{onClick:C,color:"primary",children:"Confirm"})]})]}),f.jsx(ht,{open:U,autoHideDuration:6e3,onClose:()=>F(!1),children:f.jsx(ft,{onClose:()=>F(!1),severity:p,sx:{width:"100%"},children:m})})]})},Ia=Tn.memo(Sa);export{Ia as default};
